#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–ø–æ–∫ –≤ Next.js –ø—Ä–æ–µ–∫—Ç–µ.
# –ü–µ—Ä–µ–Ω–æ—Å–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã —á–∞—Ç–∞ –∏ –∑–∞–º–µ—Ç–æ–∫ –ø–æ–¥ –æ–±—â–∏–π layout –≤ –≥—Ä—É–ø–ø–µ (main).

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏ –ª—é–±–æ–π –æ—à–∏–±–∫–µ, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
set -e

# --- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ---
APP_DIR="app"
MAIN_LAYOUT_GROUP_DIR="$APP_DIR/(main)"
CHAT_SOURCE_DIR="$APP_DIR/(chat)"
NOTES_SOURCE_DIR="$APP_DIR/(notes)"

echo "üöÄ –ù–∞—á–∏–Ω–∞–µ–º —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ñ–∞–π–ª–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—â–µ–π –≥—Ä—É–ø–ø—ã –º–∞–∫–µ—Ç–∞..."

# 1. –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –≥—Ä—É–ø–ø—ã (main), –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
if [ ! -d "$MAIN_LAYOUT_GROUP_DIR" ]; then
  mkdir -p "$MAIN_LAYOUT_GROUP_DIR"
  echo "‚úÖ –°–æ–∑–¥–∞–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: $MAIN_LAYOUT_GROUP_DIR"
else
  echo "‚òëÔ∏è  –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è $MAIN_LAYOUT_GROUP_DIR —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ."
fi

# 2. –ü–µ—Ä–µ–º–µ—â–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π layout –∏–∑ (chat) –≤ (main)
if [ -f "$CHAT_SOURCE_DIR/layout.tsx" ]; then
  mv "$CHAT_SOURCE_DIR/layout.tsx" "$MAIN_LAYOUT_GROUP_DIR/layout.tsx"
  echo "‚úÖ –ü–µ—Ä–µ–º–µ—â–µ–Ω layout: $CHAT_SOURCE_DIR/layout.tsx -> $MAIN_LAYOUT_GROUP_DIR/layout.tsx"
else
  echo "‚ö†Ô∏è –§–∞–π–ª $CHAT_SOURCE_DIR/layout.tsx –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º."
fi

# 3. –ü–µ—Ä–µ–º–µ—â–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã —á–∞—Ç–∞
# –ü–µ—Ä–µ–º–µ—â–∞–µ–º –∫–æ—Ä–Ω–µ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–∞—Ç–∞
if [ -f "$CHAT_SOURCE_DIR/page.tsx" ]; then
  mv "$CHAT_SOURCE_DIR/page.tsx" "$MAIN_LAYOUT_GROUP_DIR/page.tsx"
  echo "‚úÖ –ü–µ—Ä–µ–º–µ—â–µ–Ω–∞ –∫–æ—Ä–Ω–µ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —á–∞—Ç–∞: $CHAT_SOURCE_DIR/page.tsx -> $MAIN_LAYOUT_GROUP_DIR/page.tsx"
else
  echo "‚ö†Ô∏è –§–∞–π–ª $CHAT_SOURCE_DIR/page.tsx –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º."
fi

# –ü–µ—Ä–µ–º–µ—â–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ —á–∞—Ç–∞
if [ -d "$CHAT_SOURCE_DIR/chat" ]; then
  mv "$CHAT_SOURCE_DIR/chat" "$MAIN_LAYOUT_GROUP_DIR/chat"
  echo "‚úÖ –ü–µ—Ä–µ–º–µ—â–µ–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —á–∞—Ç–æ–≤: $CHAT_SOURCE_DIR/chat -> $MAIN_LAYOUT_GROUP_DIR/chat"
else
  echo "‚ö†Ô∏è –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è $CHAT_SOURCE_DIR/chat –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º."
fi

# 4. –ü–µ—Ä–µ–º–µ—â–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–º–µ—Ç–æ–∫
if [ -d "$NOTES_SOURCE_DIR/notes" ]; then
  mv "$NOTES_SOURCE_DIR/notes" "$MAIN_LAYOUT_GROUP_DIR/notes"
  echo "‚úÖ –ü–µ—Ä–µ–º–µ—â–µ–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∑–∞–º–µ—Ç–æ–∫: $NOTES_SOURCE_DIR/notes -> $MAIN_LAYOUT_GROUP_DIR/notes"
else
  echo "‚ö†Ô∏è –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è $NOTES_SOURCE_DIR/notes –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º."
fi

# 5. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –æ—á–∏—Å—Ç–∫–µ
echo " "
echo "‚ÑπÔ∏è  –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –ø–æ –æ—á–∏—Å—Ç–∫–µ:"
echo "–°—Ç–∞—Ä—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ $CHAT_SOURCE_DIR –∏ $NOTES_SOURCE_DIR –Ω–µ –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é, "
echo "—Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤–∞–∂–Ω—ã–µ API-–º–∞—Ä—à—Ä—É—Ç—ã. "
echo "–°–∫—Ä–∏–ø—Ç –ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª —Ç–æ–ª—å–∫–æ UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (—Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ layout)."
echo "–í—ã –º–æ–∂–µ—Ç–µ –≤—Ä—É—á–Ω—É—é —É–¥–∞–ª–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –ø—É—Å—Ç—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –µ—Å–ª–∏ —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ –æ–Ω–∏ –Ω–µ –Ω—É–∂–Ω—ã."
echo " "

echo "üéâ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω!"
echo "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é 'git status' –∏ –∑–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏—Ö."