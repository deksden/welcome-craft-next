# üß™ `.memory-bank/testing-context.md`: –ö–æ–Ω—Ç–µ–∫—Å—Ç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è WelcomeCraft

## HISTORY:

* v1.0.0 (2025-06-13): –ù–∞—á–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è E2E —Ç–µ—Å—Ç–æ–≤.

## 1. –°—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–æ:

**API —Ç–µ—Å—Ç—ã (100% –ø–æ–∫—Ä—ã—Ç–∏–µ):**
- –í—Å–µ 9 API endpoints –ø–æ–∫—Ä—ã—Ç—ã —Ç–µ—Å—Ç–∞–º–∏
- 69 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —á–µ—Ä–µ–∑ fixtures

**E2E —Ç–µ—Å—Ç–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–¥ AI-first –ø–æ–¥—Ö–æ–¥ WelcomeCraft
- –°–æ–∑–¥–∞–Ω—ã helper —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω—ã data-testid –≤ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã Page Object Model –∏ Test Utils

### üîÑ –ß–∞—Å—Ç–∏—á–Ω–æ –≥–æ—Ç–æ–≤–æ:

**E2E —Ç–µ—Å—Ç—ã:**
- –¢–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–¥ AI-first –ø–æ–¥—Ö–æ–¥
- Middleware –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **–ü—Ä–æ–±–ª–µ–º–∞**: –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ—Ç–∫—Ä—ã—Ç–∏—è

### –ú—É–ª—å—Ç–∏-–¥–æ–º–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```
Production:
‚îú‚îÄ‚îÄ welcome-onboard.ru ‚Üí /site (–ª—ç–Ω–¥–∏–Ω–≥ + —Ö–æ—Å—Ç–∏–Ω–≥)
‚îú‚îÄ‚îÄ app.welcome-onboard.ru ‚Üí /app (–∞–¥–º–∏–Ω–∫–∞ —Å NextAuth)
‚îî‚îÄ‚îÄ welcome-onboard.ru/s/[id] ‚Üí /site (—Ö–æ—Å—Ç–∏–Ω–≥ —Å–∞–π—Ç–æ–≤)

Development:
‚îú‚îÄ‚îÄ localhost:3000 ‚Üí /site (–ª—ç–Ω–¥–∏–Ω–≥ + —Ö–æ—Å—Ç–∏–Ω–≥) 
‚îú‚îÄ‚îÄ app.localhost:3000 ‚Üí /app (–∞–¥–º–∏–Ω–∫–∞ —Å NextAuth)
‚îî‚îÄ‚îÄ localhost:3000/s/[id] ‚Üí /site (—Ö–æ—Å—Ç–∏–Ω–≥ —Å–∞–π—Ç–æ–≤)
```

### –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- API endpoints `/api/*` –¥–æ—Å—Ç—É–ø–Ω—ã –≥–ª–æ–±–∞–ª—å–Ω–æ
- Middleware –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç —Ä–æ—É—Ç–∏–Ω–≥ –ø–æ –¥–æ–º–µ–Ω–∞–º
- NextAuth —Ç—Ä–µ–±—É–µ—Ç —Å–µ—Ä–≤–µ—Ä–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
- E2E —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `app.localhost:3000`

## 3. –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –Ω–∞–¥–µ–∂–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å data-testid:**
```typescript
// auth-form.tsx
<Input data-testid="auth-email-input" />
<Input data-testid="auth-password-input" />

// submit-button.tsx  
<Button data-testid="auth-submit-button" />

// chat-input.tsx (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
<Textarea data-testid="chat-input" />

// –ö–Ω–æ–ø–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏
<Button data-testid="send-button" />
<Button data-testid="stop-button" />
```

## 4. –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã

### E2E —Ç–µ—Å—Ç—ã:
- `tests/e2e/chat.test.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω –ø–æ–¥ AI-first (15 —Ç–µ—Å—Ç–æ–≤)
- `tests/e2e/artifacts.test.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω –ø–æ–¥ AI-first (3 —Ç–µ—Å—Ç–∞)
- `tests/e2e/ai-first-workflow.test.ts` - –Ω–æ–≤—ã–π (9 —Ç–µ—Å—Ç–æ–≤)
- `tests/e2e/site-generation.test.ts` - –Ω–æ–≤—ã–π (8 —Ç–µ—Å—Ç–æ–≤)
- `tests/e2e/basic-chat.test.ts` - –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç

### Helper —Ñ—É–Ω–∫—Ü–∏–∏:
- `tests/helpers/ai-mock.ts` - –º–æ–∫–∏ AI –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è WelcomeCraft
- `tests/helpers/test-utils.ts` - —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `tests/helpers/auth-mock.ts` - –ø–æ–ø—ã—Ç–∫–∞ mock –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
- `tests/fixtures.ts` - –¥–æ–±–∞–≤–ª–µ–Ω—ã TestUtils –∏ AIMockHelper
- `tests/pages/chat.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω —Å –Ω–æ–≤—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏
- `tests/pages/artifact.ts` - —Ä–∞—Å—à–∏—Ä–µ–Ω —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é
- `playwright.config.ts` - —Å–æ–∫—Ä–∞—â–µ–Ω—ã —Ç–∞–π–º–∞—É—Ç—ã (30—Å/15—Å)

## 5. –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- –¢–µ—Å—Ç—ã –ø–æ–ª—É—á–∞—é—Ç "Failed to create account!" 
- –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã: –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–†–µ—à–µ–Ω–∏–µ**: –ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –ë–î –∏–ª–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å backend

### NextAuth –¥–ª—è E2E:
- Mock –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ localStorage –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- NextAuth –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Ä–≤–µ—Ä–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —á–µ—Ä–µ–∑ middleware
- **–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å test environment

## 6. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ:
1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä E2E —Ç–µ—Å—Ç–æ–≤

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ:
1. –î–æ–±–∞–≤–∏—Ç—å data-testid –≤–æ –≤—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
2. –°–æ–∑–¥–∞—Ç—å mock –¥–ª—è NextAuth –≤ test environment
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD pipeline —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ç–µ—Å—Ç–∞–º–∏

## 7. Best Practices –¥–ª—è UI —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ù–∞–¥–µ–∂–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):
1. `data-testid` - —Å–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π
2. `role` –∏ `aria-label` - —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –¥–æ—Å—Ç—É–ø
3. `text content` - –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
4. `css selectors` - —Ç–æ–ª—å–∫–æ –≤ –∫—Ä–∞–π–Ω–µ–º —Å–ª—É—á–∞–µ

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
```typescript
// –•–æ—Ä–æ—à–æ: –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ data-testid
<Button data-testid="chat-send-button">
<Input data-testid="chat-message-input">  
<div data-testid="artifact-content">

// –ò–∑–±–µ–≥–∞—Ç—å: CSS —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã
.button:nth-child(2)
#some-dynamic-id
```

–¢–µ—Å—Ç–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–ª—é—á–µ–≤—ã—Ö AI-first —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ WelcomeCraft!