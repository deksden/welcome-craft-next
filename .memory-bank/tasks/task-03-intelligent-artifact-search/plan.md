# üß† –ü–ª–∞–Ω –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏: –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ü–æ–∏—Å–∫ –ê—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –¥–ª—è siteTool

**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–î–∞—Ç–∞:** 2025-06-20  
**Use Case:** UC-08-Intelligent-Artifact-Search  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** High

---

## üéØ –¶–µ–ª—å –∏ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ü–æ–¥—Ö–æ–¥

### –û—Å–Ω–æ–≤–Ω–∞—è –¶–µ–ª—å
–ó–∞–º–µ–Ω–∏—Ç—å –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –ø–µ—Ä–≤–æ–º—É —Ç–µ–≥—É –≤ siteTool –Ω–∞ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É, –∫–æ—Ç–æ—Ä–∞—è:
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (—Ñ–∏–ª—å—Ç—Ä—É–µ—Ç localhost URLs, —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ)  
- –û—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –∑–∞–ø—Ä–æ—Å–∞
- –†–∞–Ω–∂–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –æ—Ü–µ–Ω–∫–µ
- –£—á–∏—Ç—ã–≤–∞–µ—Ç –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ü–∞—Ç—Ç–µ—Ä–Ω: "Specialist with Tool"
```
AI –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä (siteTool) 
    ‚Üì –≤—ã–∑—ã–≤–∞–µ—Ç
AI –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç (artifactSearch tool)
    ‚Üì –∏—Å–ø–æ–ª—å–∑—É–µ—Ç
Smart Search Engine + AI Content Analyzer
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏: siteTool —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∞–π—Ç–∞, artifactSearch - –Ω–∞ –ø–æ–∏—Å–∫–µ
- –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å: –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å artifactSearch –∏ –≤–Ω–µ siteTool
- –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å: –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ

---

## üìã –≠—Ç–∞–ø—ã –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Phase 1: Database & Infrastructure (FOUNDATION) 
**–¶–µ–ª—å:** –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ë–î –∏ –±–∞–∑–æ–≤—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

#### 1.1. Database Schema Enhancement
```sql
-- –ù–æ–≤—ã–µ –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü–µ Artifact
ALTER TABLE "Artifact" ADD COLUMN "metadata" jsonb DEFAULT '{}';
ALTER TABLE "Artifact" ADD COLUMN "quality_score" decimal(3,2) DEFAULT NULL;
ALTER TABLE "Artifact" ADD COLUMN "last_analyzed_at" timestamp DEFAULT NULL;

-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
CREATE INDEX CONCURRENTLY "idx_artifact_metadata_gin" ON "Artifact" USING gin ("metadata");
CREATE INDEX CONCURRENTLY "idx_artifact_quality_score" ON "Artifact" ("quality_score");
CREATE INDEX CONCURRENTLY "idx_artifact_kind_quality" ON "Artifact" ("kind", "quality_score") WHERE "deletedAt" IS NULL;
```

#### 1.2. Metadata Structure
```typescript
interface ArtifactMetadata {
  // –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
  contentQuality: {
    score: number;           // 0.0 - 1.0
    issues: string[];        // ['localhost-urls', 'placeholder-content']
    lastChecked: string;     // ISO timestamp
  };
  
  // –ö–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª—å–Ω–∞—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å
  contextRelevance: {
    tags: string[];          // –ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ AI —Ç–µ–≥–∏
    topics: string[];        // –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ–º—ã
    targetRoles: string[];   // –î–ª—è –∫–∞–∫–∏—Ö —Ä–æ–ª–µ–π –ø–æ–¥—Ö–æ–¥–∏—Ç
    departments: string[];   // –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã
  };
  
  // –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  userPreferences: {
    [userId: string]: {
      usageCount: number;    // –°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è
      lastUsed: string;      // –ü–æ—Å–ª–µ–¥–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
      rating: number;        // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ (1-5)
    };
  };
  
  // –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
  technical: {
    wordCount?: number;
    hasUrls?: boolean;
    hasLocalhostUrls?: boolean;
    language?: string;
    readabilityScore?: number;
  };
}
```

#### 1.3. Migration Script
```typescript
// lib/db/migrations/0006_intelligent_search.sql
// + Drizzle migration –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
```

**Acceptance Criteria:**
- [ ] –°—Ö–µ–º–∞ –ë–î –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
- [ ] –ò–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏  
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ staging –¥–∞–Ω–Ω—ã—Ö
- [ ] TypeScript —Ç–∏–ø—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç typecheck

---

### Phase 2: AI Content Analyzer (INTELLIGENCE)
**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å AI –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∫–∞—á–µ—Å—Ç–≤–∞ –∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

#### 2.1. Content Quality Analyzer
```typescript
// lib/ai/content-analyzer.ts

interface ContentQualityResult {
  score: number;           // –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ 0.0-1.0
  issues: QualityIssue[];  // –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
  suggestions: string[];   // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é
}

class ContentQualityAnalyzer {
  async analyzeContent(content: string, kind: ArtifactKind): Promise<ContentQualityResult>
  async detectLocalhostUrls(content: string): Promise<string[]>
  async detectPlaceholderContent(content: string): Promise<boolean>
  async calculateReadabilityScore(content: string): Promise<number>
}
```

**–õ–æ–≥–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞:**
- **URL Validation:** –î–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ localhost, test URLs, broken links
- **Content Quality:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ placeholder —Ç–µ–∫—Å—Ç, TODO –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- **Structure Analysis:** –í–∞–ª–∏–¥–Ω–æ—Å—Ç—å JSON/CSV, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å markdown
- **Readability:** –û—Ü–µ–Ω–∫–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

#### 2.2. Context Relevance Analyzer  
```typescript
// lib/ai/relevance-analyzer.ts

interface RelevanceAnalysisResult {
  score: number;                    // 0.0-1.0
  matchedConcepts: string[];        // –ù–∞–π–¥–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏
  topicAlignment: number;           // –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–µ–º–µ
  roleCompatibility: {              // –ü–æ–¥—Ö–æ–¥—è—â–∏–µ —Ä–æ–ª–∏  
    [role: string]: number;
  };
}

class ContextRelevanceAnalyzer {
  async analyzeRelevance(
    content: string, 
    context: {
      userPrompt: string;
      siteTheme: string;
      targetRole?: string;
      department?: string;
    }
  ): Promise<RelevanceAnalysisResult>
}
```

**AI Prompts:**
```typescript
const CONTENT_QUALITY_PROMPT = `
Analyze the following content for quality issues:

Content: {content}

Check for:
1. localhost URLs or development links  
2. Placeholder text like "TODO", "Lorem ipsum"
3. Test data or dummy content
4. Broken or invalid markup
5. Professional tone and grammar

Return JSON: { score: 0.85, issues: [...], suggestions: [...] }
`;

const RELEVANCE_ANALYSIS_PROMPT = `
Analyze content relevance for context:

Content: {content}
User Request: {userPrompt}
Target Role: {targetRole}
Theme: {siteTheme}

Evaluate:
1. How well content matches the user's request
2. Relevance to target role/department  
3. Topical alignment with site theme
4. Professional appropriateness

Return JSON: { score: 0.90, matchedConcepts: [...], topicAlignment: 0.85, roleCompatibility: {...} }
`;
```

**Acceptance Criteria:**
- [ ] Content Quality Analyzer –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç localhost URLs
- [ ] Relevance Analyzer –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É  
- [ ] AI prompts –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- [ ] –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ UI
- [ ] –ü–æ–∫—Ä—ã—Ç–∏–µ —é–Ω–∏—Ç-—Ç–µ—Å—Ç–∞–º–∏ > 80%

---

### Phase 3: Smart Search Engine (SEARCH & RANKING)
**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—É—é –ø–æ–∏—Å–∫–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É —Å —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ–º

#### 3.1. Enhanced Search Query Builder
```typescript
// lib/db/smart-queries.ts

interface SmartSearchParams {
  userId: string;
  context: {
    slotDefinition: BlockSlotDefinition;
    userPrompt: string;
    siteTheme?: string;
    targetRole?: string;
  };
  filters: {
    kind?: ArtifactKind | ArtifactKind[];
    tags?: string[];
    minQualityScore?: number;
  };
  pagination: {
    page: number;
    pageSize: number;
  };
}

async function smartSearchArtifacts(params: SmartSearchParams): Promise<{
  results: RankedArtifact[];
  totalCount: number;
  searchMetadata: SearchMetadata;
}>
```

#### 3.2. Multi-Factor Ranking Algorithm
```typescript
interface RankingFactors {
  contentQuality: number;      // 0.0-1.0, –≤–µ—Å 25%
  contextRelevance: number;    // 0.0-1.0, –≤–µ—Å 30%  
  userPreference: number;      // 0.0-1.0, –≤–µ—Å 20%
  freshness: number;          // 0.0-1.0, –≤–µ—Å 15%
  tagMatch: number;           // 0.0-1.0, –≤–µ—Å 10%
}

interface RankedArtifact extends Artifact {
  rankingScore: number;       // –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞
  rankingFactors: RankingFactors;
  rankingExplanation: string; // –ü–æ—á–µ–º—É –≤—ã–±—Ä–∞–Ω
}

function calculateRankingScore(
  artifact: Artifact, 
  context: SearchContext,
  userHistory: UserPreferences
): RankedArtifact
```

**–ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è:**
```typescript
const RANKING_WEIGHTS = {
  contentQuality: 0.25,
  contextRelevance: 0.30,
  userPreference: 0.20, 
  freshness: 0.15,
  tagMatch: 0.10
};

function calculateFinalScore(factors: RankingFactors): number {
  return Object.entries(RANKING_WEIGHTS).reduce((total, [factor, weight]) => {
    return total + (factors[factor] * weight);
  }, 0);
}
```

#### 3.3. Fallback Strategy
```typescript
class SmartSearchEngine {
  async search(params: SmartSearchParams): Promise<SearchResult> {
    // 1. –ü–æ–ø—ã—Ç–∫–∞ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
    const smartResults = await this.performSmartSearch(params);
    
    // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    const hasQualityResults = smartResults.results.some(r => r.rankingScore > QUALITY_THRESHOLD);
    
    if (hasQualityResults) {
      return smartResults;
    }
    
    // 3. Fallback –∫ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–º—É –ø–æ–∏—Å–∫—É
    console.warn('Smart search returned low quality results, falling back to traditional search');
    return await this.performTraditionalSearch(params);
  }
}
```

**Acceptance Criteria:**
- [ ] Smart search –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –∫–∞—á–µ—Å—Ç–≤—É
- [ ] Fallback –∫ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–º—É –ø–æ–∏—Å–∫—É —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –ø–ª–æ—Ö–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö
- [ ] –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Ñ–∞–∫—Ç–æ—Ä—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –≤–µ—Å–∞–º–∏
- [ ] –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –ø–æ–∏—Å–∫ < 3 —Å–µ–∫ –Ω–∞ 1000+ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

---

### Phase 4: artifactSearch AI Tool (AI INTEGRATION)
**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å AI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤

#### 4.1. AI Tool Definition
```typescript
// lib/ai/tools/artifact-search.ts

const artifactSearchTool = {
  description: 'Search and rank artifacts intelligently based on context and quality',
  parameters: z.object({
    query: z.string().describe('Search query or context description'),
    slotDefinition: z.object({
      kind: z.union([z.string(), z.array(z.string())]),
      tags: z.array(z.string()).optional(),
      description: z.string().optional(),
    }),
    context: z.object({
      userPrompt: z.string(),
      siteTheme: z.string().optional(),
      targetRole: z.string().optional(),
      department: z.string().optional(),
    }),
    options: z.object({
      maxResults: z.number().default(10),
      minQualityScore: z.number().default(0.7),
      includeExplanation: z.boolean().default(true),
    }).optional(),
  }),
};

async function artifactSearch(params: z.infer<typeof artifactSearchTool.parameters>) {
  // –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Smart Search Engine
  const searchParams = {
    userId: session.user.id,
    context: params.context,
    filters: {
      kind: params.slotDefinition.kind,
      tags: params.slotDefinition.tags,
      minQualityScore: params.options?.minQualityScore,
    },
    pagination: { page: 1, pageSize: params.options?.maxResults || 10 }
  };
  
  const results = await smartSearchArtifacts(searchParams);
  
  return {
    artifacts: results.results.map(r => ({
      artifactId: r.id,
      title: r.title,
      kind: r.kind,
      score: r.rankingScore,
      explanation: r.rankingExplanation,
    })),
    searchMetadata: results.searchMetadata,
    totalFound: results.totalCount,
  };
}
```

#### 4.2. Integration with AI SDK
```typescript
// lib/ai/models.ts - –æ–±–Ω–æ–≤–∏—Ç—å –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–æ–≤–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞

import { artifactSearchTool, artifactSearch } from './tools/artifact-search';

export const aiToolsRegistry = {
  // –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
  artifactCreate,
  artifactUpdate,
  artifactEnhance,
  // –ù–æ–≤—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
  artifactSearch,
};

export const availableTools = {
  // –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
  artifactCreate: artifactCreateTool,
  artifactUpdate: artifactUpdateTool,  
  artifactEnhance: artifactEnhanceTool,
  // –ù–æ–≤—ã–π
  artifactSearch: artifactSearchTool,
};
```

**Acceptance Criteria:**
- [ ] artifactSearch tool –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å AI SDK
- [ ] –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ —Ç–∏–ø—ã —Å–ª–æ—Ç-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –∏–∑ site blocks
- [ ] –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- [ ] –õ–æ–≥–∏—Ä—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

---

### Phase 5: siteTool Integration (ORCHESTRATION)
**–¶–µ–ª—å:** –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π siteTool

#### 5.1. Update siteTool Architecture  
```typescript
// artifacts/kinds/site/server.ts - –æ–±–Ω–æ–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –ø–æ–∏—Å–∫–∞

async function findArtifactForSlot(
  slotDefinition: BlockSlotDefinition,
  context: SiteGenerationContext,
  session: Session
): Promise<{ artifactId: string; version?: number } | null> {

  // –ù–û–í–ê–Ø –õ–û–ì–ò–ö–ê: –ò—Å–ø–æ–ª—å–∑—É–µ–º AI artifactSearch tool
  const searchResult = await aiWithTools.invoke({
    prompt: `Find the best artifact for this slot:
    
Slot: ${slotDefinition.caption}
Description: ${slotDefinition.description}
Required kind: ${slotDefinition.kind}
Tags: ${slotDefinition.tags?.join(', ')}

User request context: ${context.userPrompt}
Site theme: ${context.siteTheme}
Target role: ${context.targetRole}

Use artifactSearch tool to find high-quality, relevant artifact.`,
    tools: { artifactSearch },
  });

  const toolResult = searchResult.toolResults?.[0];
  if (toolResult?.toolName === 'artifactSearch' && toolResult.result?.artifacts?.length > 0) {
    const bestArtifact = toolResult.result.artifacts[0];
    
    // –õ–æ–≥–∏—Ä—É–µ–º –≤—ã–±–æ—Ä –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
    await logArtifactSelection({
      slotId: slotDefinition.id,
      selectedArtifactId: bestArtifact.artifactId,
      score: bestArtifact.score,
      explanation: bestArtifact.explanation,
      context,
    });
    
    return { 
      artifactId: bestArtifact.artifactId,
      version: bestArtifact.version 
    };
  }

  // FALLBACK: –¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ (—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞)
  console.warn(`Smart search failed for slot ${slotDefinition.caption}, using fallback`);
  return await fallbackArtifactSearch(slotDefinition, session);
}
```

#### 5.2. Enhanced Site Generation Context
```typescript
interface SiteGenerationContext {
  userPrompt: string;           // –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  siteTheme?: string;          // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è —Ç–µ–º–∞
  targetRole?: string;         // –¶–µ–ª–µ–≤–∞—è —Ä–æ–ª—å (–∏–∑–≤–ª–µ—á–µ–Ω–∞ –∏–∑ –ø—Ä–æ–º–ø—Ç–∞)
  department?: string;         // –î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç
  preferredStyle?: string;     // –°—Ç–∏–ª—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è
  urgency?: 'low' | 'medium' | 'high'; // –°—Ä–æ—á–Ω–æ—Å—Ç—å
}

function extractSiteContext(userPrompt: string): SiteGenerationContext {
  // AI –∞–Ω–∞–ª–∏–∑ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
  // –ù–∞–ø—Ä–∏–º–µ—Ä: "–æ–Ω–±–æ—Ä–¥–∏–Ω–≥-—Å–∞–π—Ç –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–∏–∑–∞–π–Ω–µ—Ä–∞" -> targetRole: "–¥–∏–∑–∞–π–Ω–µ—Ä"
}
```

#### 5.3. Quality Assurance Integration  
```typescript
// –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Content Quality Analyzer
async function validateSelectedArtifacts(
  siteDefinition: SiteDefinition,
  context: SiteGenerationContext
): Promise<QualityReport> {
  
  const qualityIssues: QualityIssue[] = [];
  
  for (const block of siteDefinition.blocks) {
    for (const [slotId, slotConfig] of Object.entries(block.slots)) {
      if (slotConfig.artifactId) {
        const artifact = await getArtifactById(slotConfig.artifactId);
        const qualityResult = await contentQualityAnalyzer.analyzeContent(
          artifact.content, 
          artifact.kind
        );
        
        if (qualityResult.score < QUALITY_THRESHOLD) {
          qualityIssues.push({
            blockId: block.id,
            slotId,
            artifactId: slotConfig.artifactId,
            issues: qualityResult.issues,
            suggestions: qualityResult.suggestions,
          });
        }
      }
    }
  }
  
  return { qualityIssues, overallScore: calculateOverallScore(qualityIssues) };
}
```

**Acceptance Criteria:**
- [ ] siteTool –∏—Å–ø–æ–ª—å–∑—É–µ—Ç artifactSearch –≤–º–µ—Å—Ç–æ –ø—Ä–∏–º–∏—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
- [ ] –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –ø–æ–∏—Å–∫
- [ ] Fallback –∫ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–º—É –ø–æ–∏—Å–∫—É —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ —Å–±–æ—è—Ö
- [ ] Quality assurance –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã  
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–±–æ—Ä–æ–≤ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞

---

### Phase 6: API Endpoints (PUBLIC INTERFACE)
**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å API endpoints –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞

#### 6.1. Smart Search API
```typescript
// app/api/artifacts/smart-search/route.ts

export async function POST(request: NextRequest) {
  const body = await request.json();
  
  const searchParams: SmartSearchParams = {
    userId: session.user.id,
    context: body.context,
    filters: body.filters,
    pagination: body.pagination || { page: 1, pageSize: 20 },
  };
  
  const results = await smartSearchEngine.search(searchParams);
  
  return NextResponse.json({
    artifacts: results.results,
    totalCount: results.totalCount,
    searchMetadata: {
      searchId: generateSearchId(),
      executionTime: results.searchMetadata.executionTime,
      algorithmVersion: '1.0.0',
      fallbackUsed: results.searchMetadata.fallbackUsed,
    },
  });
}
```

#### 6.2. Content Analysis API
```typescript  
// app/api/artifacts/analyze-content/route.ts

export async function POST(request: NextRequest) {
  const { content, kind, analysisType } = await request.json();
  
  let result;
  if (analysisType === 'quality') {
    result = await contentQualityAnalyzer.analyzeContent(content, kind);
  } else if (analysisType === 'relevance') {
    result = await relevanceAnalyzer.analyzeRelevance(content, context);
  }
  
  return NextResponse.json(result);
}
```

#### 6.3. Update Existing Artifacts API
```typescript
// app/api/artifacts/route.ts - –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É smart search

export async function GET(request: NextRequest) {
  // –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞...
  
  const useSmartSearch = searchParams.get('smart') === 'true';
  const contextParam = searchParams.get('context');
  
  if (useSmartSearch && contextParam) {
    const context = JSON.parse(contextParam);
    const smartResults = await smartSearchEngine.search({
      userId: session.user.id,
      context,
      filters: { kind, tags },
      pagination: { page, pageSize }
    });
    
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º
    return NextResponse.json({
      artifacts: smartResults.results,
      hasMore: page * pageSize < smartResults.totalCount,
      // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
    });
  }
  
  // –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞...
}
```

**Acceptance Criteria:**
- [ ] Smart search API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- [ ] Content analysis API –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å
- [ ] Existing artifacts API –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç smart search —Ä–µ–∂–∏–º
- [ ] API endpoints –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ `.memory-bank/guides/api-documentation.md`
- [ ] Rate limiting –∏ error handling —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã

---

### Phase 7: Testing & Validation (QUALITY ASSURANCE)
**–¶–µ–ª—å:** –û–±–µ—Å–ø–µ—á–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ —á–µ—Ä–µ–∑ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### 7.1. Unit Tests
```typescript
// tests/unit/lib/ai/content-analyzer.test.ts
describe('ContentQualityAnalyzer', () => {
  it('should detect localhost URLs in content', async () => {
    const content = 'Visit our portal at http://localhost:3000/dashboard';
    const result = await analyzer.analyzeContent(content, 'text');
    
    expect(result.issues).toContain('localhost-urls');
    expect(result.score).toBeLessThan(0.5);
  });
  
  it('should give high score to professional content', async () => {
    const content = 'Welcome to our company! Visit https://company.com for more info.';
    const result = await analyzer.analyzeContent(content, 'text');
    
    expect(result.score).toBeGreaterThan(0.8);
    expect(result.issues).toHaveLength(0);
  });
});

// tests/unit/lib/db/smart-queries.test.ts  
describe('smartSearchArtifacts', () => {
  it('should rank artifacts by quality and relevance', async () => {
    // Mock setup with high and low quality artifacts
    const results = await smartSearchArtifacts(mockSearchParams);
    
    expect(results.results[0].rankingScore).toBeGreaterThan(results.results[1].rankingScore);
    expect(results.results[0].rankingFactors.contentQuality).toBeGreaterThan(0.8);
  });
});

// tests/unit/lib/ai/tools/artifact-search.test.ts
describe('artifactSearch tool', () => {
  it('should return relevant artifacts for site context', async () => {
    const params = {
      query: 'useful links for designer onboarding',
      slotDefinition: { kind: 'text', tags: ['links'] },
      context: { userPrompt: 'create designer onboarding site', targetRole: 'designer' }
    };
    
    const result = await artifactSearch(params);
    
    expect(result.artifacts).toHaveLength(3);
    expect(result.artifacts[0].score).toBeGreaterThan(0.7);
  });
});
```

#### 7.2. Integration Tests
```typescript
// tests/unit/artifacts/kinds/site/smart-search-integration.test.ts
describe('siteTool with intelligent search', () => {
  it('should use smart search to find quality artifacts', async () => {
    const mockAI = createMockAI();
    const result = await siteCreate({
      title: 'Designer Onboarding Site',
      prompt: 'Create site for new designer with quality resources'
    }, mockAI, mockSession);
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –≤—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
    const siteData = JSON.parse(result.content);
    expect(siteData.blocks).toHaveLength(3);
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏ –≤—ã–±–æ—Ä–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
    expect(mockLogArtifactSelection).toHaveBeenCalledTimes(3);
  });
});
```

#### 7.3. E2E Test for UC-08
```typescript  
// tests/e2e/use-cases/UC-08-Intelligent-Artifact-Search.test.ts
import { test, expect } from '@playwright/test';
import { createUseCaseTest } from '../../helpers/use-case-integration';

const useCase = createUseCaseTest({
  id: 'UC-08',
  title: '–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ü–æ–∏—Å–∫ –ê—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –¥–ª—è siteTool',
  world: 'CONTENT_LIBRARY_BASE',
  aiFixtures: true,
});

test.describe('UC-08: Intelligent Artifact Search', () => {
  
  test('should generate high-quality site with smart artifact selection', async ({ page }) => {
    await useCase.setup(page);
    
    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–∞–π—Ç –¥–ª—è –¥–∏–∑–∞–π–Ω–µ—Ä–∞
    await page.getByTestId('chat-input-textarea').fill(
      '–°–æ–∑–¥–∞–π –æ–Ω–±–æ—Ä–¥–∏–Ω–≥-—Å–∞–π—Ç –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–∏–∑–∞–π–Ω–µ—Ä–∞ –∫–æ–º–∞–Ω–¥—ã'
    );
    await page.getByTestId('chat-input-send').click();
    
    // –ñ–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
    await expect(page.getByTestId('artifact-preview')).toBeVisible({ timeout: 30000 });
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Å–æ–∑–¥–∞–ª—Å—è site –∞—Ä—Ç–µ—Ñ–∞–∫—Ç
    const preview = page.getByTestId('artifact-preview');
    await expect(preview.getByText('–û–Ω–±–æ—Ä–¥–∏–Ω–≥-—Å–∞–π—Ç')).toBeVisible();
    
    // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å–∞–π—Ç
    await preview.click();
    await expect(page.getByTestId('artifact-content')).toBeVisible();
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞—á–µ—Å—Ç–≤–æ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
    // –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å localhost URLs
    const content = await page.getByTestId('artifact-content').textContent();
    expect(content).not.toContain('localhost');
    expect(content).not.toContain('TODO');
    
    // –î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è –¥–∏–∑–∞–π–Ω–µ—Ä–æ–≤
    expect(content).toContain('–¥–∏–∑–∞–π–Ω');
    expect(content).toContain('https://');
  });
  
  test('should fallback to traditional search when smart search fails', async ({ page }) => {
    // –¢–µ—Å—Ç —Å –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å–±–æ—è smart search
    await useCase.setupWithMocks(page, {
      'smart-search-failure': true
    });
    
    await page.getByTestId('chat-input-textarea').fill('–°–æ–∑–¥–∞–π –ø—Ä–æ—Å—Ç–æ–π —Å–∞–π—Ç');
    await page.getByTestId('chat-input-send').click();
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Å–∞–π—Ç –≤—Å–µ —Ä–∞–≤–Ω–æ —Å–æ–∑–¥–∞–ª—Å—è —á–µ—Ä–µ–∑ fallback
    await expect(page.getByTestId('artifact-preview')).toBeVisible({ timeout: 30000 });
  });
  
});
```

**Acceptance Criteria:**
- [ ] Unit tests –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (coverage > 80%)
- [ ] Integration tests –ø—Ä–æ–≤–µ—Ä—è—é—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- [ ] E2E test UC-08 –ø—Ä–æ—Ö–æ–¥–∏—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ —Å AI Fixtures
- [ ] Performance tests –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ < 3 —Å–µ–∫
- [ ] All tests pass –≤ CI/CD pipeline

---

## üìä Success Metrics & Monitoring  

### Key Performance Indicators
1. **Quality Improvement:** % reduction in localhost URLs in generated sites
2. **User Satisfaction:** Rating of automatically selected artifacts  
3. **Efficiency Gain:** % reduction in manual edits after site generation
4. **Performance:** Average smart search response time
5. **Adoption:** % of siteTool calls using smart search vs fallback

### Monitoring & Analytics  
```typescript
// lib/analytics/intelligent-search.ts
interface SearchAnalytics {
  searchId: string;
  userId: string; 
  timestamp: string;
  context: SiteGenerationContext;
  results: {
    smartSearchUsed: boolean;
    fallbackUsed: boolean;
    selectedArtifactId: string;
    rankingScore: number;
    userRating?: number; // Feedback from user
  };
  performance: {
    searchTime: number;
    analysisTime: number;
    totalTime: number;
  };
}

async function logSearchAnalytics(data: SearchAnalytics) {
  // Store in analytics database/service for ML improvements
}
```

### Quality Assurance Dashboard
- **Real-time monitoring** –∫–∞—á–µ—Å—Ç–≤–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö —Å–∞–π—Ç–æ–≤
- **A/B testing** smart search vs traditional search
- **User feedback** collection –∏ –∞–Ω–∞–ª–∏–∑
- **Performance metrics** –∏ alerts

---

## üöÄ Deployment Strategy

### Phase Rollout Plan
1. **Phase 1-3:** Backend infrastructure - —Å–∫—Ä—ã—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è  
2. **Phase 4-5:** AI integration - beta testing —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π –≥—Ä—É–ø–ø–æ–π
3. **Phase 6-7:** Full rollout —Å monitoring –∏ analytics

### Feature Flags
```typescript
const FEATURE_FLAGS = {
  INTELLIGENT_SEARCH_ENABLED: process.env.INTELLIGENT_SEARCH_ENABLED === 'true',
  SMART_SEARCH_FALLBACK: process.env.SMART_SEARCH_FALLBACK === 'true',
  CONTENT_QUALITY_ANALYSIS: process.env.CONTENT_QUALITY_ANALYSIS === 'true',
};
```

### Backward Compatibility
- –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- Smart search –≤–∫–ª—é—á–∞–µ—Ç—Å—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ feature flags
- Fallback –∫ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–º—É –ø–æ–∏—Å–∫—É –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–µ–Ω

---

## üîó Integration Points

### Existing Systems  
- **siteTool:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–π artifactSearch AI tool
- **Artifact API:** –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ smart search —Ä–µ–∂–∏–º–∞
- **AI Fixtures:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Å—Ç–∏—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **Memory Bank:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

### External Dependencies
- **Google Gemini:** –î–ª—è AI –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏  
- **PostgreSQL:** –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è
- **Redis:** –î–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–∞
- **Vercel AI SDK:** –î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ artifactSearch tool

---

> **–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü–æ—Å–ª–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–ª–∞–Ω–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ Phase 1 - Database Schema Design –∏ —Å–æ–∑–¥–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤.