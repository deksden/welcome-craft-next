# üìù –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞: –†–µ–¥–∞–∫—Ç–æ—Ä –ê—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤

**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–î–∞—Ç–∞:** 2025-06-20  
**–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç–∏–≤–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è  
**–§–∞–π–ª –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:** `components/artifact.tsx`

üîó **–°–≤—è–∑–∞–Ω–Ω—ã–π —Ç–µ—Å—Ç:** `tests/e2e/components/artifact-editor-behavior.test.ts`

---

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

–†–µ–¥–∞–∫—Ç–æ—Ä –ê—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ (`Artifact`) ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç WelcomeCraft –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤. –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–ª–æ–∂–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤–∫–ª—é—á–∞—è –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫—É—Ä—Å–æ—Ä–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å AI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏.

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç—å
- **5 —Ç–∏–ø–æ–≤ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤:** `text`, `code`, `image`, `sheet`, `site`
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞:** –ö–∞–∂–¥—ã–π —Ç–∏–ø –∏–º–µ–µ—Ç —Å–≤–æ–π –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ `artifacts/kinds/[type]/client.tsx`
- **–ü–ª–∞–≥–∏–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** `artifactDefinitions` array –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∏–ø—ã

### –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –¥–∞–Ω–Ω—ã–µ
- **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** `useArtifact()` hook –¥–ª—è UI —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **–°–µ—Ä–≤–µ—Ä–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** SWR –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å API
- **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ö–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –≤—Ä–µ–º–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é
- **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ:** –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `setMetadata` callback

---

## üìã –î–µ—Ç–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞

**–î–∞–Ω–æ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç —Å `artifactId` –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏  
**–ö–æ–≥–¥–∞:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Artifact` –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è —Å –Ω–æ–≤—ã–º `artifact.artifactId`  
**–¢–æ–≥–¥–∞:**
- SWR –∑–∞–ø—Ä–æ—Å –∫ `/api/artifact?id=${artifactId}` –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç—Å—è
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–∫–µ–ª–µ—Ç–æ–Ω –∑–∞–≥—Ä—É–∑–∫–∏ –≤–æ –≤—Ä–µ–º—è `isArtifactsFetching`
- –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `currentArtifact` —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- `artifact.content` —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–µ–π –∏–∑ —Å–µ—Ä–≤–µ—Ä–∞
- `artifact.saveStatus` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ `'saved'`
- –ï—Å–ª–∏ –µ—Å—Ç—å `artifactDefinition.initialize`, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è —Ç–∏–ø–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å –¥–µ–±–∞—É–Ω—Å–æ–º

**–î–∞–Ω–æ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞  
**–ö–æ–≥–¥–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑–º–µ–Ω—è–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 10 —Å–µ–∫—É–Ω–¥  
**–¢–æ–≥–¥–∞:**
- `saveContent()` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –µ—Å—Ç—å –ª–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ content comparison
- –î–ª—è `sheet` –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤: CSV –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è (—É–¥–∞–ª–µ–Ω–∏–µ –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫, trim)
- –î–ª—è `site` –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤: JSON —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è, –∞ –Ω–µ —Å—Ç—Ä–æ–∫–∏  
- –î–ª—è `text/code`: —Å—Ç—Ä–æ–∫–∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è —Å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π whitespace
- –ï—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –µ—Å—Ç—å: `debouncedHandleContentChange` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å 10-—Å–µ–∫—É–Ω–¥–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
- `artifact.saveStatus` –º–µ–Ω—è–µ—Ç—Å—è: `'idle'` ‚Üí `'saving'` ‚Üí `'saved'`
- POST –∑–∞–ø—Ä–æ—Å –∫ `/api/artifact` —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é
- SWR –∫–µ—à –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞–µ—Ç—Å—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏/—Å–º–µ–Ω–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞

**–î–∞–Ω–æ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`saveStatus: 'saving'`)  
**–ö–æ–≥–¥–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –∏–ª–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥—Ä—É–≥–æ–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç  
**–¢–æ–≥–¥–∞:**
- `useEffect` —Å `previousArtifactIdRef` –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç —Å–º–µ–Ω—É –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞
- –ï—Å–ª–∏ `artifact.saveStatus === 'saving'`, –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `handleContentChange`
- `ArtifactCloseButton onClose` —Ç–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º
- –ö–æ–Ω—Ç–µ–Ω—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –±–µ–∑ –¥–µ–±–∞—É–Ω—Å–∞ (`debounce: false`)

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∏—Å—Ç–æ—Ä–∏–∏

**–î–∞–Ω–æ:** –ê—Ä—Ç–µ—Ñ–∞–∫—Ç –∏–º–µ–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–µ—Ä—Å–∏–π –≤ –ë–î  
**–ö–æ–≥–¥–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç –Ω–∞ —Å—Ç—Ä–µ–ª–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≤–µ—Ä—Å–∏–π  
**–¢–æ–≥–¥–∞:**
- `VersionFooter` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ `!isCurrentVersion`
- `handleVersionChange('prev'/'next')` –∏–∑–º–µ–Ω—è–µ—Ç `currentVersionIndex`
- `getArtifactContentByIdx()` –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏
- –í —Ä–µ–∂–∏–º–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è
- `handleVersionChange('latest')` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 5: –ö—É—Ä—Å–æ—Ä–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –≤ —Ç–∞–±–ª–∏—á–Ω—ã—Ö —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞—Ö

**–î–∞–Ω–æ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `sheet` –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–º  
**–ö–æ–≥–¥–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç –Ω–∞ —è—á–µ–π–∫—É —Ç–∞–±–ª–∏—Ü—ã –∏ –∑–∞—Ç–µ–º –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏  
**–¢–æ–≥–¥–∞:**
- `selectedCell` —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é –∫–∞–∫ `{row: number, col: number}`
- DataGrid –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç `selectedCells` –∏ `onSelectedCellChange` props
- –ü–æ–∑–∏—Ü–∏—è –∫—É—Ä—Å–æ—Ä–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–µ—Ä—Å–∏–π
- –ü—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Ñ–æ–∫—É—Å –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —Ç–æ–π –∂–µ —è—á–µ–π–∫–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 6: Read-Only —Ä–µ–∂–∏–º –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

**–î–∞–Ω–æ:** –ê—Ä—Ç–µ—Ñ–∞–∫—Ç –æ—Ç–∫—Ä—ã—Ç –≤ –ø—É–±–ª–∏—á–Ω–æ–º —Ä–µ–∂–∏–º–µ (`isReadonly: true`)  
**–ö–æ–≥–¥–∞:** –ü—É–±–ª–∏—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–º  
**–¢–æ–≥–¥–∞:**
- `onSaveContent` callback –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ –ø—É—Å—Ç—É—é —Ñ—É–Ω–∫—Ü–∏—é `() => {}`
- `Toolbar` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è
- `ArtifactActions` –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è
- –í—Å–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã –ø–æ–ª—É—á–∞—é—Ç `isReadonly: true` –∏ –±–ª–æ–∫–∏—Ä—É—é—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
- SWR polling –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### –°—Ü–µ–Ω–∞—Ä–∏–π 7: Site –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏ –¥–∏–∞–ª–æ–≥ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

**–î–∞–Ω–æ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `site` –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–º  
**–ö–æ–≥–¥–∞:** –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–æ–±—ã—Ç–∏–µ `'open-site-publication-dialog'`  
**–¢–æ–≥–¥–∞:**
- –û—Ç–¥–µ–ª—å–Ω—ã–π SWR –∑–∞–ø—Ä–æ—Å –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ —Å `publication_state`
- `SitePublicationDialog` —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —Å fallback –æ–±—ä–µ–∫—Ç–æ–º –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –µ—â–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ `onSiteUpdate` –æ–±–Ω–æ–≤–ª—è–µ—Ç SWR –∫–µ—à
- Custom event –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `window.addEventListener`

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö–ª—é—á–µ–≤—ã–µ —Ö—É–∫–∏ –∏ —É—Ç–∏–ª–∏—Ç—ã
- **`useArtifact()`** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ UI –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞
- **`useSWR`** ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **`useDebounceCallback`** ‚Äî 10-—Å–µ–∫—É–Ω–¥–Ω–æ–µ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
- **`useWindowSize`** ‚Äî –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–¥ –º–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- **`useRef`** ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ artifactId –¥–ª—è save-on-change

### SWR –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è  
```typescript
refreshInterval: (data) => {
  if (!data || data.length === 0) return 3000;
  const latest = data[data.length - 1];
  const needsContent = !latest.content || latest.content === '';
  const needsSummary = !latest.summary;
  return (needsContent || needsSummary) ? 3000 : 0;
}
```

### Change Detection –∞–ª–≥–æ—Ä–∏—Ç–º—ã
- **Site artifacts:** JSON.stringify —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ parsing
- **Sheet artifacts:** CSV –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è + trim + —É–¥–∞–ª–µ–Ω–∏–µ –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫
- **Text/Code artifacts:** string.trim() —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
- **Fallback:** –ü—Ä—è–º–æ–µ —Å—Ç—Ä–æ–∫–æ–≤–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ø–∞—Ä—Å–∏–Ω–≥–∞

---

## üéØ Acceptance Criteria

### ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
1. **–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–µ–π:** –ò–¥–µ–Ω—Ç–∏—á–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –±–ª–∞–≥–æ–¥–∞—Ä—è —É–º–Ω–æ–π change detection
3. **Save-on-close:** –ù–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏/—Å–º–µ–Ω–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞
4. **–ö—É—Ä—Å–æ—Ä–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏:** –ü–æ–∑–∏—Ü–∏—è –≤ —Ç–∞–±–ª–∏—á–Ω—ã—Ö —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞—Ö —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è–º–∏
5. **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏ –Ω–∞–≤–∏–≥–∏—Ä–æ–≤–∞—Ç—å –ø–æ –∏—Å—Ç–æ—Ä–∏–∏ –≤–µ—Ä—Å–∏–π
6. **Read-only mode:** –ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
7. **Site publication:** –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –¥–∏–∞–ª–æ–≥ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π site –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤

### ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è  
1. **SWR –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:** Polling –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
2. **–ú–µ–º–æ–∏–∑–∞—Ü–∏—è:** `memo()` —Å `fast-deep-equal` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ª–∏—à–Ω–∏—Ö —Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤
3. **Debounced saving:** –ú–∞–∫—Å–∏–º—É–º 1 –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞ 10 —Å–µ–∫—É–Ω–¥
4. **Mobile optimization:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

### ‚úÖ UX —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
1. **Loading states:** –°–∫–µ–ª–µ—Ç–æ–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏
2. **Toast notifications:** –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏  
3. **Fullscreen mode:** –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É split –∏ full —Ä–µ–∂–∏–º–∞–º–∏
4. **Error handling:** Graceful –æ–±—Ä–∞–±–æ—Ç–∫–∞ SWR –æ—à–∏–±–æ–∫ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

---

## üß™ –°–≤—è–∑–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª:** `tests/e2e/components/artifact-editor-behavior.test.ts`

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç–µ—Å—Ç-–∫–µ–π—Å—ã:**
1. **Autosave behavior:** –ü—Ä–æ–≤–µ—Ä–∫–∞ 10-—Å–µ–∫—É–Ω–¥–Ω–æ–≥–æ –¥–µ–±–∞—É–Ω—Å–∞
2. **Change detection:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ content normalization
3. **Version navigation:** –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
4. **Save on close:** –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
5. **Cursor preservation:** –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –≤ DataGrid –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
6. **SWR polling:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ polling –ø—Ä–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
7. **Read-only mode:** –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ø—É–±–ª–∏—á–Ω–æ–º —Ä–µ–∂–∏–º–µ
8. **Site publication:** –î–∏–∞–ª–æ–≥ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –¥–ª—è site –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤

---

## üìö –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤:** `.memory-bank/architecture/artifacts.md`
- **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `.memory-bank/guides/api-documentation.md#artifacts-api`
- **–°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:** `.memory-bank/architecture/system-patterns.md#swr-dialog-rendering`
- **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `components/artifact.tsx` - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ

---

> **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–Ω–æ–≤–∏—Ç—å —ç—Ç—É —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.