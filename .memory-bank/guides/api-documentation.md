# üöÄ WelcomeCraft API Documentation

**–í–µ—Ä—Å–∏—è:** 2.0.0  
**–î–∞—Ç–∞:** 2025-06-21  
**–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è - –û–ë–ù–û–í–õ–ï–ù–û –ø–æ–¥ UC-10 Schema-Driven Architecture  

> **‚ö†Ô∏è –í–ê–ñ–ù–û:** –î–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –ø—Ä–∏ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ API endpoints, –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –∏–ª–∏ —Å—Ö–µ–º–∞—Ö –¥–∞–Ω–Ω—ã—Ö.

---

## üìã –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã API

### –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **–ë–∞–∑–æ–≤—ã–π URL:** `https://app.welcome-onboard.ru/api` (production) / `http://app.localhost:3000/api` (development)
- **–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö:** JSON
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** NextAuth.js session cookies + test-session fallback –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ HTTP –∫–æ–¥—ã + –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ `ChatSDKError`

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã
- **REST –ø–æ–¥—Ö–æ–¥:** –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –¥–µ–π—Å—Ç–≤–∏–π
- **–ú—É–ª—å—Ç–∏-–¥–æ–º–µ–Ω–Ω–æ—Å—Ç—å:** API –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ –æ–±–µ–∏—Ö –¥–æ–º–µ–Ω–∞—Ö (app.domain –∏ domain)
- **World Isolation:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ —Ç–µ—Å—Ç–æ–≤—ã–º –º–∏—Ä–∞–º
- **UC-10 Schema-Driven Storage:** –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ë–î –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞
- **Unified Artifact Tools Registry:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º–∏

---

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API Endpoints

### –°–æ–≥–ª–∞—à–µ–Ω–∏—è –æ–± –∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏
- **–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ:** `/api/artifact` - —Ä–∞–±–æ—Ç–∞ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Ä–µ—Å—É—Ä—Å–æ–º –ø–æ ID
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ:** `/api/artifacts` - —Ä–∞–±–æ—Ç–∞ —Å–æ —Å–ø–∏—Å–∫–∞–º–∏ —Ä–µ—Å—É—Ä—Å–æ–≤  
- **–í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã:** `/api/chat/[chatId]/details` - —Ä–µ—Å—É—Ä—Å—ã –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞

---

## üì¶ Artifacts API

### GET `/api/artifact`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ –ø–æ ID —Å –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `id` (string, required) - ID –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞
- `version` (number, optional) - –ù–æ–º–µ—Ä –≤–µ—Ä—Å–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: –ø–æ—Å–ª–µ–¥–Ω—è—è)
- `versionTimestamp` (string, optional) - ISO timestamp –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```
GET /api/artifact?id=abc123&version=2
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
[
  {
    "id": "abc123",
    "title": "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ",
    "kind": "text",
    "content": "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–æ–º–∞–Ω–¥—É!",
    "summary": "–¢–µ–∫—Å—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤",
    "createdAt": "2025-06-20T10:00:00Z",
    "userId": "user123",
    "authorId": "author456",
    "deletedAt": null,
    // UC-10: content –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã A_Text
    "publication_state": [],
    "world_id": null
  }
]
```

**–ö–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤:**
- `200 OK` - –£—Å–ø–µ—à–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- `404 Not Found` - –ê—Ä—Ç–µ—Ñ–∞–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
- `401 Unauthorized` - –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤)

---

### POST `/api/artifact`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "id": "abc123",
  "title": "–û–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ",
  "content": "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–∞—à—É –∫–æ–º–∞–Ω–¥—É!",
  "kind": "text"
}
```

**–ö–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤:**
- `200 OK` - –í–µ—Ä—Å–∏—è —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞
- `400 Bad Request` - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- `401 Unauthorized` - –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤

---

### GET `/api/artifacts`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `page` (number, default: 1) - –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `pageSize` (number, default: 20, max: 50) - –†–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `search` / `searchQuery` (string, optional) - –ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É, summary –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É
- `kind` (ArtifactKind, optional) - –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É: `text`, `code`, `image`, `sheet`, `site`, `person`, `address`, `faq-item`, `link`, `set-definition`, `set`
- `groupByVersions` (boolean, default: true) - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –≤–µ—Ä—Å–∏—è–º (true = —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –≤–µ—Ä—Å–∏–∏)

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```
GET /api/artifacts?page=1&pageSize=20&search=–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ&kind=text&groupByVersions=true
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "artifacts": [
    {
      "id": "abc123",
      "title": "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ",
      "kind": "text",
      "content": "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!",
      "summary": "–¢–µ–∫—Å—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è",
      "createdAt": "2025-06-20T10:00:00Z"
    }
  ],
  "hasMore": false,
  "nextCursor": null,
  "totalCount": 1,
  "currentPage": 1,
  "pageSize": 20,
  "data": "... (legacy format for backward compatibility)"
}
```

**–ö–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤:**
- `200 OK` - –£—Å–ø–µ—à–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞
- `400 Bad Request` - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
- `401 Unauthorized` - –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

---

### GET `/api/artifacts/recent`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–µ–¥–∞–≤–Ω–∏—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `limit` (number, default: 5) - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
- `kind` (ArtifactKind, optional) - –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
[
  {
    "id": "abc123",
    "title": "–ü–æ—Å–ª–µ–¥–Ω–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç",
    "kind": "text",
    "createdAt": "2025-06-20T10:00:00Z"
  }
]
```

---

### POST `/api/artifacts/create-from-upload`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ –∏–∑ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "fileUrl": "https://blob.vercel-storage.com/abc123",
  "fileName": "document.pdf",
  "fileType": "application/pdf"
}
```

**–ö–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤:**
- `201 Created` - –ê—Ä—Ç–µ—Ñ–∞–∫—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω
- `400 Bad Request` - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ URL
- `401 Unauthorized` - –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

---

## üí¨ Chat API

### GET `/api/history`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
[
  {
    "id": "chat123",
    "title": "–°–æ–∑–¥–∞–Ω–∏–µ —Å–∞–π—Ç–∞ –¥–ª—è HR",
    "createdAt": "2025-06-20T09:00:00Z",
    "published_until": null,
    "userId": "user123"
  }
]
```

---

### GET `/api/chat/[chatId]/details`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —á–∞—Ç–µ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã URL:**
- `chatId` (string, required) - ID —á–∞—Ç–∞

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "id": "chat123",
  "title": "–°–æ–∑–¥–∞–Ω–∏–µ —Å–∞–π—Ç–∞",
  "createdAt": "2025-06-20T09:00:00Z",
  "published_until": "2025-07-20T09:00:00Z",
  "userId": "user123"
}
```

---

## üéØ AI Tools API

### POST `/api/chat`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –û—Å–Ω–æ–≤–Ω–æ–π endpoint –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å AI-—Å–∏—Å—Ç–µ–º–æ–π.

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ AI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
- `artifactCreate` - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞
- `artifactUpdate` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞  
- `artifactEnhance` - –£–ª—É—á—à–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏
- `artifactDelete` - –ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞
- `artifactRestore` - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞

**–ü—Ä–∏–º–µ—Ä —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "messages": [
    {
      "role": "user",
      "content": "–°–æ–∑–¥–∞–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç —Å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ–º"
    }
  ],
  "chatId": "chat123"
}
```

---

## üîê Authentication API

### POST `/api/auth/signin`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

### POST `/api/auth/signout`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã.

---

## üìä –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

### ArtifactKind (UC-10 —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã)
```typescript
type ArtifactKind = 
  // –ë–∞–∑–æ–≤—ã–µ —Ç–∏–ø—ã
  | 'text' | 'code' | 'image' | 'sheet' | 'site'
  // UC-10 –Ω–æ–≤—ã–µ HR-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã
  | 'person' | 'address' | 'faq-item'
  // UC-10 —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ç–∏–ø—ã
  | 'link' | 'set-definition' | 'set'
```

### ArtifactApiResponse (UC-10 Schema-Driven)
```typescript
interface ArtifactApiResponse {
  id: string
  title: string
  kind: ArtifactKind
  content: string // –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
  summary: string | null
  createdAt: Date
  userId: string
  authorId: string | null
  deletedAt: Date | null
  publication_state: PublicationInfo[]
  world_id: string | null
  // UC-10: Sparse columns —É–¥–∞–ª–µ–Ω—ã, –∫–æ–Ω—Ç–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Artifact Tools Registry
}
```

### PublicationInfo
```typescript
interface PublicationInfo {
  source: 'direct' | 'chat' | 'site'
  sourceId: string
  publishedAt: string
  expiresAt: string | null
}
```

---

## üéõÔ∏è UC-10 Schema-Driven Artifacts API

### POST `/api/artifacts/import`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ò–º–ø–æ—Ä—Ç —Ñ–∞–π–ª–æ–≤ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Ç–∏–ø–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "fileUrl": "https://blob.vercel-storage.com/abc123",
  "fileName": "document.docx",
  "mimeType": "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
}
```

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:**
- **`.docx`** ‚Üí `text` –∞—Ä—Ç–µ—Ñ–∞–∫—Ç (—á–µ—Ä–µ–∑ mammoth.js)
- **`.xlsx`** ‚Üí `sheet` –∞—Ä—Ç–µ—Ñ–∞–∫—Ç (—á–µ—Ä–µ–∑ XLSX.js)
- **`.csv`** ‚Üí `sheet` –∞—Ä—Ç–µ—Ñ–∞–∫—Ç
- **`.txt`, `.md`** ‚Üí `text` –∞—Ä—Ç–µ—Ñ–∞–∫—Ç
- **`.jpg`, `.png`, `.gif`, `.webp`** ‚Üí `image` –∞—Ä—Ç–µ—Ñ–∞–∫—Ç

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "artifactId": "abc123",
  "kind": "text",
  "title": "Imported Document",
  "metadata": {
    "originalFilename": "document.docx",
    "originalFormat": "docx", 
    "importedAt": "2025-06-21T10:00:00Z"
  }
}
```

**–ö–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤:**
- `201 Created` - –§–∞–π–ª —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç —Å–æ–∑–¥–∞–Ω
- `400 Bad Request` - –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞
- `401 Unauthorized` - –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

---

### UC-10 –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

#### PersonData (–∞—Ä—Ç–µ—Ñ–∞–∫—Ç `person`)
```typescript
interface PersonData {
  fullName: string
  position?: string
  department?: string
  email?: string
  phone?: string
  photo_url?: string
  bio?: string
}
```

#### AddressData (–∞—Ä—Ç–µ—Ñ–∞–∫—Ç `address`)
```typescript
interface AddressData {
  street?: string
  city?: string
  state?: string
  country?: string
  postalCode?: string
  type?: 'office' | 'home' | 'shipping'
}
```

#### FaqItemData (–∞—Ä—Ç–µ—Ñ–∞–∫—Ç `faq-item`)
```typescript
interface FaqItemData {
  question: string
  answer: string
  category?: string
  tags?: string[]
}
```

#### LinkData (–∞—Ä—Ç–µ—Ñ–∞–∫—Ç `link`)
```typescript
interface LinkData {
  url: string
  title: string
  description?: string
  category?: string
  isInternal?: boolean
}
```

#### SetDefinitionData (–∞—Ä—Ç–µ—Ñ–∞–∫—Ç `set-definition`)
```typescript
interface SetDefinitionData {
  name: string
  description?: string
  schema: object // JSON Schema for validation
  defaultValues?: object
}
```

#### SetData (–∞—Ä—Ç–µ—Ñ–∞–∫—Ç `set`)
```typescript
interface SetData {
  setDefinitionId: string
  items: object[] // Array of items conforming to set definition schema
}
```

---

## üîç –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ HTTP –∫–æ–¥—ã
- `200 OK` - –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- `201 Created` - –†–µ—Å—É—Ä—Å —Å–æ–∑–¥–∞–Ω
- `400 Bad Request` - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- `401 Unauthorized` - –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è  
- `403 Forbidden` - –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤
- `404 Not Found` - –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- `500 Internal Server Error` - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

### –§–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫
```json
{
  "error": {
    "type": "bad_request:api",
    "message": "Invalid page parameter. Must be between 1 and 50."
  }
}
```

---

## üåç World Isolation

API –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–∑–æ–ª—è—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –ø–æ —Ç–µ—Å—Ç–æ–≤—ã–º –º–∏—Ä–∞–º —á–µ—Ä–µ–∑:
- **Cookie:** `world_id` - ID –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–∏—Ä–∞
- **Middleware:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ world_id
- **Queries:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ world context –≤ database queries

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ API:**
- –í—Å–µ endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–≥–æ –º–∏—Ä–∞
- –ë–µ–∑ world_id —Ä–∞–±–æ—Ç–∞—é—Ç —Å production –¥–∞–Ω–Ω—ã–º–∏
- Test sessions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–æ–ª–∏—Ä—É—é—Ç –¥–∞–Ω–Ω—ã–µ

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞
```javascript
const response = await fetch('/api/chat', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    messages: [{ 
      role: 'user', 
      content: '–°–æ–∑–¥–∞–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç —Å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ–º –¥–ª—è –Ω–æ–≤—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤' 
    }],
    chatId: 'chat123'
  })
})
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
```javascript
const response = await fetch('/api/artifacts?page=1&search=–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ&groupByVersions=true')
const data = await response.json()
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞  
```javascript
const response = await fetch('/api/artifact', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    id: 'abc123',
    title: '–û–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ',
    content: '–ù–æ–≤—ã–π —Ç–µ–∫—Å—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è',
    kind: 'text'
  })
})
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### UC-10 Schema-Driven Architecture
- **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:** –ö–∞–∂–¥—ã–π —Ç–∏–ø –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ –ë–î
- **Unified Artifact Tools Registry:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –¥–∏—Å–ø–µ—Ç—á–µ—Ä –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º–∏
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –¶–µ–ª–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Ç–æ–ª—å–∫–æ –∫ –Ω—É–∂–Ω—ã–º —Ç–∞–±–ª–∏—Ü–∞–º —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∏–Ω–¥–µ–∫—Å–∞–º–∏
- **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î –∏ TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –í—Å–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ endpoints —Ç—Ä–µ–±—É—é—Ç –¥–µ–π—Å—Ç–≤—É—é—â—É—é —Å–µ—Å—Å–∏—é
- –ü—É–±–ª–∏—á–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –º—É–ª—å—Ç–∏-–¥–æ–º–µ–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **UC-10 Validation:** JSON Schema –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–≥–∏–Ω–∞—Ü–∏—é –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤
- `groupByVersions=true` —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- SWR –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- **UC-10 Benefits:** –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã

### –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- API —Å–ª–µ–¥—É–µ—Ç semver –ø—Ä–∏–Ω—Ü–∏–ø–∞–º
- Breaking changes –±—É–¥—É—Ç —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—Ç—å—Å—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º URL
- **UC-10 Compatibility:** –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å legacy —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ —á–µ—Ä–µ–∑ compatibility layer

---

> **üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –ø—Ä–∏:**
> - –î–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö endpoints
> - –ò–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–ª–∏ —Å—Ö–µ–º –¥–∞–Ω–Ω—ã—Ö  
> - –ò–∑–º–µ–Ω–µ–Ω–∏–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ API
> - –û–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
> - –ò–∑–º–µ–Ω–µ–Ω–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
> - –ò–∑–º–µ–Ω–µ–Ω–∏–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏–ª–∏ security –ª–æ–≥–∏–∫–∏
> - –î–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö error codes –∏–ª–∏ messages

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, –≤–Ω–æ—Å—è—â–∏–π –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ API

**–ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
1. **–ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–¥** API endpoint
2. **–û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ
3. **–û–±–Ω–æ–≤–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ Use Case** —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –µ—Å–ª–∏ –∑–∞—Ç—Ä–æ–Ω—É—Ç–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
4. **–û–±–Ω–æ–≤–∏—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** –¥–ª—è –æ—Ç—Ä–∞–∂–µ–Ω–∏—è –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏
5. **–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è** –≤ git —Å –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–º commit message

**–ö—Ä–∏—Ç–∏—á–Ω–æ:** API –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã!

---

## üß™ UC-10 Testing Coverage

### File Import System Tests
- **`tests/routes/artifacts-import.test.ts`** ‚Äî –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ `/api/artifacts/import` endpoint
- **Supported formats:** DOCX, CSV, TXT, MD —Ñ–∞–π–ª—ã —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Ç–∏–ø–∞
- **Error handling:** –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤, unauthorized –¥–æ—Å—Ç—É–ø
- **Integration testing:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –æ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î

### Schema-Driven Artifacts Tests  
- **UC-10 –Ω–æ–≤—ã–µ —Ç–∏–ø—ã:** person, address, faq-item, link, set-definition, set
- **Specialized tables validation:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ A_Person, A_Address –∏ —Ç.–¥.
- **Unified Artifact Tools Registry:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ –¥–ª—è –≤—Å–µ—Ö 11 —Ç–∏–ø–æ–≤
- **Content preservation:** –í–∞–ª–∏–¥–∞—Ü–∏—è —á—Ç–æ JSON –¥–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è

### Test Coverage Metrics
- **API endpoints:** 100% –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö artifacts/* endpoints
- **Artifact types:** 100% –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö 11 —Ç–∏–ø–æ–≤ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤  
- **Error scenarios:** –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö error paths –∏ edge cases
- **Performance:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### Test Payload Factory
- **`tests/helpers/artifact-payload-factory.ts`** ‚Äî –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è —Ñ–∞–±—Ä–∏–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Scenario-based testing:** –ì–æ—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è HR –∏ IT –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
- **Bulk data generation:** –ú–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –¥–ª—è performance —Ç–µ—Å—Ç–æ–≤