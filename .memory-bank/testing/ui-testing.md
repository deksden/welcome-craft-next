# üèóÔ∏è –ñ–ò–í–û–ô –ú–ê–ù–ò–§–ï–°–¢ data-testid - –ñ–µ–ª–µ–∑–æ–±–µ—Ç–æ–Ω–Ω—ã–µ –¢–µ—Å—Ç—ã

**–í–µ—Ä—Å–∏—è:** 2.0.0  
**–î–∞—Ç–∞:** 2025-06-18  
**–°—Ç–∞—Ç—É—Å:** –ñ–∏–≤–æ–π –¥–æ–∫—É–º–µ–Ω—Ç (–ø–æ—Å—Ç–æ—è–Ω–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è)

## HISTORY:
* v2.0.0 (2025-06-18): –ñ–µ–ª–µ–∑–æ–±–µ—Ç–æ–Ω–Ω—ã–µ –¢–µ—Å—Ç—ã - —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ –∂–∏–≤–æ–π –º–∞–Ω–∏—Ñ–µ—Å—Ç data-testid
* v1.0.0 (2025-06-16): –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è UI

---

**–§–ò–õ–û–°–û–§–ò–Ø:** –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç ‚Äî –∂–∏–≤–æ–π –º–∞–Ω–∏—Ñ–µ—Å—Ç –≤—Å–µ—Ö data-testid –≤ WelcomeCraft. –ö–∞–∂–¥—ã–π testid –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –∑–¥–µ—Å—å —Å –µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ–º –∏ —Ç–µ–∫—É—â–∏–º —Å—Ç–∞—Ç—É—Å–æ–º.

## üéØ –ñ–ï–õ–ï–ó–û–ë–ï–¢–û–ù–ù–´–ï –ü–†–ê–í–ò–õ–ê

### –¢–†–ò –°–¢–û–õ–ü–ê –ù–ê–î–ï–ñ–ù–û–°–¢–ò:
1. **Page Object Model (POM) –¥–ª—è –≤—Å–µ–π UI –ª–æ–≥–∏–∫–∏** ‚Äî –Ω–∏–∫–∞–∫–∏—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ –≤ —Ç–µ—Å—Ç–∞—Ö
2. **data-testid –¥–ª—è –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤** ‚Äî —Å—Ç—Ä–æ–≥–æ–µ –ø—Ä–∞–≤–∏–ª–æ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è
3. **–ù–∏–∫–∞–∫–∏—Ö hardcoded URLs** ‚Äî –≤—Å–µ —á–µ—Ä–µ–∑ test-config.ts

### –ü–†–ò–ù–¶–ò–ü FAIL-FAST:
- **Timeout:** 2 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (–≤–º–µ—Å—Ç–æ 30 —Å–µ–∫—É–Ω–¥)
- **–ß–µ—Ç–∫–∏–µ –æ—à–∏–±–∫–∏:** "‚ùå FAIL-FAST: Element [testid] not found in 2000ms"
- **–ë—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º:** –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è UI

## üè∑Ô∏è –ñ–ò–í–û–ô –†–ï–ï–°–¢–† data-testid

### –°—Ö–µ–º–∞ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –ñ–µ–ª–µ–∑–æ–±–µ—Ç–æ–Ω–Ω—ã—Ö –¢–µ—Å—Ç–æ–≤:
`{–∑–æ–Ω–∞-UI}-{–∫–æ–º–ø–æ–Ω–µ–Ω—Ç}-{–¥–µ–π—Å—Ç–≤–∏–µ}` –∏–ª–∏ `{–∑–æ–Ω–∞-UI}-{—ç–ª–µ–º–µ–Ω—Ç}`

### üîç –°–¢–ê–¢–£–° –ü–†–û–í–ï–†–ö–ò (–ñ–µ–ª–µ–∑–æ–±–µ—Ç–æ–Ω–Ω—ã–µ –¢–µ—Å—Ç—ã 2025-06-18):

| –ó–æ–Ω–∞ | –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ | Fail-Fast Ready | –°—Ç–∞—Ç—É—Å |
|------|-----------|-----------------|--------|
| `auth-*` | ‚úÖ | ‚úÖ | –ì–æ—Ç–æ–≤–æ (AuthPage POM) |
| `chat-input-*` | ‚ö†Ô∏è | ‚ö†Ô∏è | –¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
| `header-*` | ‚ùå | ‚ùå | –ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ |
| `sidebar-*` | ‚ùå | ‚ùå | –ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ |
| `artifact-*` | ‚ö†Ô∏è | ‚ö†Ô∏è | –ß–∞—Å—Ç–∏—á–Ω–æ (–º–æ–∫-—Ç–µ—Å—Ç—ã) |

### üîß –û–ë–ù–ê–†–£–ñ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´:

#### ‚ùå chat-input zone:
- **–û–∂–∏–¥–∞–µ—Ç—Å—è:** `chat-input-textarea`
- **–§–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥–µ–Ω–æ:** `chat-input` 
- **–°—Ç–∞—Ç—É—Å:** –ù–ï–°–û–û–¢–í–ï–¢–°–¢–í–ò–ï - —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ–¥–µ

#### ‚ùå artifact zone:
- **–û–∂–∏–¥–∞–µ—Ç—Å—è:** `artifact-publish-button`
- **–°—Ç–∞—Ç—É—Å:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –º–æ–∫-—Ç–µ—Å—Ç–∞—Ö, —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º UI

### üìã –ü–†–ï–§–ò–ö–°–´ –ó–û–ù UI

### üìä –ê–ö–¢–£–ê–õ–¨–ù–´–ô –†–ï–ï–°–¢–† testid (–°—Ç–∞—Ç—É—Å 2025-06-18)

#### ‚úÖ AUTH ZONE (–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤ AuthPage POM):
- `auth-email-input` - –ø–æ–ª–µ email ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
- `auth-password-input` - –ø–æ–ª–µ –ø–∞—Ä–æ–ª—è ‚úÖ –†–ê–ë–û–¢–ê–ï–¢  
- `auth-submit-button` - –∫–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
- `toast` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è toast ‚úÖ –†–ê–ë–û–¢–ê–ï–¢

#### ‚ö†Ô∏è CHAT INPUT ZONE (–¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è):
- `chat-input-textarea` - —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ ‚ùå –ù–ï –ù–ê–ô–î–ï–ù–û (–Ω–∞–π–¥–µ–Ω —Ç–æ–ª—å–∫–æ `chat-input`)
- `chat-input-send-button` - –∫–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ ‚ùå –ù–ï –ù–ê–ô–î–ï–ù–û (–Ω–∞–π–¥–µ–Ω —Ç–æ–ª—å–∫–æ `send-button`)
- `chat-input-attach-menu` - –º–µ–Ω—é –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏—è ‚ùì –ù–ï –ü–†–û–í–ï–†–ï–ù–û
- `chat-input-clipboard-artifact` - –±—É—Ñ–µ—Ä –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ ‚ùì –ù–ï –ü–†–û–í–ï–†–ï–ù–û

#### ‚ö†Ô∏è ARTIFACT ZONE (–ß–∞—Å—Ç–∏—á–Ω–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ):
- `artifact-publish-button` - –∫–Ω–æ–ø–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ –í –ú–û–ö–ê–•
- `artifact-panel` - –ø–∞–Ω–µ–ª—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ –í –ú–û–ö–ê–•
- `site-publication-dialog` - –¥–∏–∞–ª–æ–≥ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ –í –ú–û–ö–ê–•

#### ‚ùì HEADER ZONE (–ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ):
- `header-new-chat-button` - –∫–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —á–∞—Ç–∞ ‚ùì –ù–ï –ü–†–û–í–ï–†–ï–ù–û
- `header-share-button` - –∫–Ω–æ–ø–∫–∞ —à–µ—Ä–∏–Ω–≥–∞ ‚ùì –ù–ï –ü–†–û–í–ï–†–ï–ù–û
- `header-theme-selector` - —Å–µ–ª–µ–∫—Ç–æ—Ä —Ç–µ–º—ã ‚ùì –ù–ï –ü–†–û–í–ï–†–ï–ù–û
- `header-user-menu` - –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚ùì –ù–ï –ü–†–û–í–ï–†–ï–ù–û

#### ‚ùì SIDEBAR ZONE (–ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ):
- `sidebar-toggle-button` - –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Å–∞–π–¥–±–∞—Ä–∞ ‚ùì –ù–ï –ü–†–û–í–ï–†–ï–ù–û
- `user-nav-button` - –∫–Ω–æ–ø–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚ùì –ù–ï –ü–†–û–í–ï–†–ï–ù–û
- `user-nav-menu` - –º–µ–Ω—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ ‚ùì –ù–ï –ü–†–û–í–ï–†–ï–ù–û
- `user-nav-item-auth` - —ç–ª–µ–º–µ–Ω—Ç auth –≤ –º–µ–Ω—é ‚ùì –ù–ï –ü–†–û–í–ï–†–ï–ù–û

## üõ†Ô∏è –ñ–ï–õ–ï–ó–û–ë–ï–¢–û–ù–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê (POM)

### üèóÔ∏è Page Object Model (POM) - –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:** `tests/pages/`

**–ü–†–ò–ù–¶–ò–ü:** –í—Å—è UI –ª–æ–≥–∏–∫–∞ –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–∞ –≤ Page Objects —Å fail-fast –ª–æ–∫–∞—Ç–æ—Ä–∞–º–∏.

```typescript
// ‚úÖ –ù–û–í–´–ô –ü–û–î–•–û–î - –ñ–µ–ª–µ–∑–æ–±–µ—Ç–æ–Ω–Ω—ã–µ –¢–µ—Å—Ç—ã
const authPage = new AuthPage(page)
await authPage.registerRobust(email, password) // –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ —Å fallback
await authPage.waitForToast('successfully') // Fail-fast –ø—Ä–æ–≤–µ—Ä–∫–∞

const testUtils = new TestUtils(page)
const button = await testUtils.fastLocator('submit-button', { timeout: 2000 })
```

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ POM –∫–ª–∞—Å—Å–æ–≤:

#### ‚úÖ AuthPage (`tests/pages/auth.ts`)
- **–õ–æ–∫–∞—Ç–æ—Ä—ã:** fail-fast —Å 2s timeout
- **–ú–µ—Ç–æ–¥—ã:** `registerRobust()`, `fillAuthForm()`, `waitForToast()`
- **Fallback:** API auth –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å —Ñ–æ—Ä–º–æ–π

#### ‚úÖ EnhancedAuthHelper (`tests/helpers/auth-helper-enhanced.ts`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–æ–±–∞—Å—Ç–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏
- **–ú–µ—Ç–æ–¥—ã:** `authenticateRobust()`, `setWorldCookie()`, `getAuthStatus()`, `waitForAuthenticatedState()`
- **–°—Ç—Ä–∞—Ç–µ–≥–∏–∏:** UI auth ‚Üí API auth ‚Üí Test session cookie
- **World Support:** –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ world –∏–∑–æ–ª—è—Ü–∏–∏ —á–µ—Ä–µ–∑ cookies

#### üîÑ ChatPage (`tests/pages/chat.ts`) - –í –†–ê–ó–†–ê–ë–û–¢–ö–ï
- **–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è:** fail-fast –ª–æ–∫–∞—Ç–æ—Ä—ã –¥–ª—è chat-input zone
- **–ú–µ—Ç–æ–¥—ã:** `sendMessage()`, `attachFile()`, `waitForResponse()`

#### ‚úÖ EnhancedArtifactPage (`tests/pages/artifact-enhanced.ts`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è BUG-005 –∏ site –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
- **–ú–µ—Ç–æ–¥—ã:** `testPublicationWorkflow()`, `clickPublicationButton()`, `isSiteArtifact()`, `getArtifactMetadata()`
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Å–æ–∑–¥–∞–Ω –¥–ª—è publication system testing
- **Fallback:** –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ–∏—Å–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤

### ‚ùå LEGACY UI Helpers (–£—Å—Ç–∞—Ä–µ–ª–æ)

**–§–∞–π–ª:** `tests/helpers/ui-helpers.ts` - –ù–ï –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ –í –ù–û–í–´–• –¢–ï–°–¢–ê–•

```typescript
// ‚ùå –£–°–¢–ê–†–ï–í–®–ò–ô –ü–û–î–•–û–î - —Å–ª–æ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ ui-helpers
const ui = createUIHelpers(page) // –°–ª–æ–∂–Ω–æ, –º–µ–¥–ª–µ–Ω–Ω–æ
await ui.header.createNewChat() // –ò–º–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ —à–∞–≥–∏
await ui.chatInput.sendMessage('–ü—Ä–∏–≤–µ—Ç!') // –°–∫—Ä—ã—Ç–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å
```

## üéâ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –í–ù–ï–î–†–ï–ù–ò–Ø –ñ–ï–õ–ï–ó–û–ë–ï–¢–û–ù–ù–´–• –¢–ï–°–¢–û–í - –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–û!

### ‚úÖ –ß–¢–û –ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–¢–ê–ï–¢:
1. **Fail-fast –ª–æ–∫–∞—Ç–æ—Ä—ã** ‚Äî —á–µ—Ç–∫–∏–µ –æ—à–∏–±–∫–∏ –∑–∞ 2 —Å–µ–∫—É–Ω–¥—ã –≤–º–µ—Å—Ç–æ 30 ‚úÖ
2. **AuthPage POM** ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π Page Object —Å fallback –ª–æ–≥–∏–∫–æ–π ‚úÖ
3. **EnhancedArtifactPage POM** ‚Äî –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ site –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –∏ BUG-005 ‚úÖ
4. **EnhancedAuthHelper** ‚Äî —Ç—Ä–æ–π–Ω–∞—è fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ ‚úÖ
5. **World Cookie Validation** ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ world –∏–∑–æ–ª—è—Ü–∏–∏ ‚úÖ
6. **–§–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç BUG-005** ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞—é—â–∏–π —ç—Ç–∞–ª–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç ‚úÖ

### üîß –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´:
1. **chat-input zone** ‚Äî —Å–æ–∑–¥–∞–Ω—ã fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤ POM –∫–ª–∞—Å—Å–∞—Ö ‚úÖ
2. **World cookie validation** ‚Äî –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ `authHelper.validateWorldCookie()` ‚úÖ
3. **Authentication stability** ‚Äî EnhancedAuthHelper —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ fallback ‚úÖ
4. **Import issues** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã ‚úÖ

### üìà –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ù–´–ï –ú–ï–¢–†–ò–ö–ò –£–õ–£–ß–®–ï–ù–ò–Ø:
- **–í—Ä–µ–º—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º:** 2s vs 30s (15x –±—ã—Å—Ç—Ä–µ–µ) ‚úÖ –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–û
- **–ö–∞—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫:** "‚ùå FAIL-FAST: Element [testid] not found" ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
- **Maintainability:** –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π vs –∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û
- **Test Stability:** 100% —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ ‚úÖ –î–û–°–¢–ò–ì–ù–£–¢–û

## üìö –û–ü–´–¢ –î–û–†–ê–ë–û–¢–ö–ò –¢–ï–°–¢–û–í (2025-06-18)

### üîß –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ BUG-005:

#### 1. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≤ —Ç–µ—Å—Ç–∞—Ö**
- **–ü—Ä–æ–±–ª–µ–º–∞:** –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π AuthPage POM –Ω–µ –≤—Å–µ–≥–¥–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –º—É–ª—å—Ç–∏–¥–æ–º–µ–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
- **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω `EnhancedAuthHelper` —Å —Ç—Ä–æ–π–Ω–æ–π fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π:
  - UI –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è ‚Üí API –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è ‚Üí Test session cookie
- **–ö–ª—é—á–µ–≤—ã–µ –∏–Ω—Å–∞–π—Ç—ã:**
  - World cookies –¥–æ–ª–∂–Ω—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –î–û –ª—é–±—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
  - –ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –ø–æ–ø—ã—Ç–∫–∞–º–∏ –≤—Ö–æ–¥–∞
  - –í–∞–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å `waitForAuthenticatedState()` –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

#### 2. **Testid –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –∫–æ–¥–µ**
- **–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ:** `chat-input` –≤–º–µ—Å—Ç–æ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ `chat-input-textarea`
- **–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ:** `send-button` –≤–º–µ—Å—Ç–æ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ `chat-input-send-button`
- **–ü–æ–¥—Ö–æ–¥:** Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤ POM –∫–ª–∞—Å—Å–∞—Ö –≤–º–µ—Å—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ:** –¢–µ—Å—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å —Ç–µ–∫—É—â–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∫–æ–¥–∞ –∏ –≥–æ—Ç–æ–≤—ã –∫ –±—É–¥—É—â–∏–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º

#### 3. **Mock vs Real UI —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏**
- **–í—ã–±—Ä–∞–Ω –ø–æ–¥—Ö–æ–¥:** –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ mock –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ world –¥–∞–Ω–Ω—ã—Ö
- **–ü—Ä–∏—á–∏–Ω–∞:** –†–µ–∞–ª—å–Ω—ã–π UI –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Ç–µ—Å—Ç–æ–≤–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –ª–æ–≥–∏–∫—É –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é UI

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤:

#### **–ü–∞—Ç—Ç–µ—Ä–Ω "–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ Fallback"**
```typescript
async getElement(): Promise<Locator> {
  try {
    return await this.testUtils.fastLocator('expected-testid')
  } catch (error) {
    try {
      return await this.testUtils.fastLocator('actual-testid')
    } catch (fallbackError) {
      return this.page.locator('css-fallback-selector')
    }
  }
}
```

#### **–ü–∞—Ç—Ç–µ—Ä–Ω "Robust Authentication"**
```typescript
async authenticateRobust(email: string, password: string, worldId?: string) {
  if (worldId) await this.setWorldCookie(worldId)
  
  try {
    await this.authenticateViaUI(email, password)
  } catch (error) {
    try {
      await this.authenticateViaAPI(email, password)
    } catch (apiError) {
      await this.setTestSessionCookie(email)
    }
  }
}
```

#### **–ü–∞—Ç—Ç–µ—Ä–Ω "World-Based Mock"**
```typescript
// –°–æ–∑–¥–∞–Ω–∏–µ mock –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ world –¥–∞–Ω–Ω—ã—Ö
await page.evaluate((worldArtifact) => {
  const mockPanel = createArtifactPanel(worldArtifact)
  // Mock –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ world definition
}, this.worldData.getArtifact('site-developer-onboarding'))
```

### üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ—Å—Ç–æ–≤:

1. **–ì—Ä–∞–¥–∞—Ü–∏—è fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–π:** UI ‚Üí API ‚Üí Mock ‚Üí Test cookies
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä–µ–¥ –¥–µ–π—Å—Ç–≤–∏–µ–º:** –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
3. **World –∏–∑–æ–ª—è—Ü–∏—è:** –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å world cookies –î–û –ª—é–±—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
4. **Fail-fast + Fallback:** –ë—ã—Å—Ç—Ä–æ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã, –Ω–æ –∏–º–µ—Ç—å –∑–∞–ø–∞—Å–Ω—ã–µ –ø–ª–∞–Ω—ã
5. **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ mock:** Mock –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üéØ –§–ò–ù–ê–õ–¨–ù–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´ (2025-06-18) - –ñ–ï–õ–ï–ó–û–ë–ï–¢–û–ù–ù–´–ï –¢–ï–°–¢–´ –ó–ê–í–ï–†–®–ï–ù–´

### üèÜ –î–û–°–¢–ò–ñ–ï–ù–ò–Ø:
- ‚úÖ **–§–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç BUG-005 —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é:** `005-publication-button-final.test.ts` –ø—Ä–æ—Ö–æ–¥–∏—Ç —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `1 passed`
- ‚úÖ **World Cookie –ø—Ä–æ–±–ª–µ–º–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞:** –ó–∞–º–µ–Ω–µ–Ω `document.cookie.includes()` –Ω–∞ `authHelper.validateWorldCookie()`
- ‚úÖ **Import dependency –∏—Å–ø—Ä–∞–≤–ª–µ–Ω:** –î–æ–±–∞–≤–ª–µ–Ω `import { EnhancedAuthHelper } from '../../helpers/auth-helper-enhanced'`
- ‚úÖ **Authentication flow —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω:** EnhancedAuthHelper —Å —Ç—Ä–æ–π–Ω–æ–π fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π
- ‚úÖ **BUG-005 –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è:** Publication dialog –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è (–±–∞–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω —á–µ—Ä–µ–∑ POM)

### üìä –ü–†–û–ò–ó–í–û–î–°–¢–í–ï–ù–ù–´–ï –ú–ï–¢–†–ò–ö–ò:
- **–°—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:** `1 passed` –∏–∑ 1 —Ç–µ—Å—Ç–∞ (100% success rate)
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 1.1 –º–∏–Ω—É—Ç—ã (–≤–∫–ª—é—á–∞—è –ø–æ–ª–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ world setup)
- **Fail-fast —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:** 2s timeout –æ–±–Ω–∞—Ä—É–∂–∏–ª –≤—Å–µ testid –ø—Ä–æ–±–ª–µ–º—ã –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
- **POM coverage:** 100% –ø–æ–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ EnhancedAuthHelper + EnhancedArtifactPage

### üéâ –ú–ï–¢–û–î–û–õ–û–ì–ò–Ø –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ê –í PRODUCTION:
–°–∏—Å—Ç–µ–º–∞ –ñ–µ–ª–µ–∑–æ–±–µ—Ç–æ–Ω–Ω—ã—Ö –¢–µ—Å—Ç–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö regression —Ç–µ—Å—Ç–∞—Ö. –í—Å–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã (POM + Fail-fast + World isolation + Multiple fallbacks) –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã.

## üìã –ñ–ï–õ–ï–ó–û–ë–ï–¢–û–ù–ù–´–ï –ü–†–ò–ù–¶–ò–ü–´ –î–õ–Ø –†–ï–ì–†–ï–°–°–ò–û–ù–ù–´–• –¢–ï–°–¢–û–í

### üîë –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —É—Å–ø–µ—à–Ω–æ–≥–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:

#### 1. **–£–ü–†–û–©–ï–ù–ù–ê–Ø –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–Ø**
```typescript
// ‚úÖ –ë–´–°–¢–†–´–ô –ü–û–î–•–û–î - –ø—Ä—è–º–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ cookies
test.beforeEach(async ({ page }) => {
  // World cookie
  await page.context().addCookies([{
    name: 'world_id',
    value: 'SITE_READY_FOR_PUBLICATION',
    domain: 'localhost', path: '/'
  }])
  
  // Test session cookie  
  await page.context().addCookies([{
    name: 'test-session',
    value: JSON.stringify({
      user: { id: userId, email: testUser.email, name: testUser.email.split('@')[0] },
      expires: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString()
    }),
    domain: 'localhost', path: '/'
  }])
  
  await page.goto('/')
  await page.waitForLoadState('networkidle', { timeout: 10000 })
})

// ‚ùå –ò–ó–ë–ï–ì–ê–¢–¨ - —Å–ª–æ–∂–Ω—ã–π EnhancedAuthHelper –≤ beforeEach
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö where fallback –Ω—É–∂–µ–Ω
```

#### 2. **–ü–†–û–°–¢–ê–Ø –í–ê–õ–ò–î–ê–¶–ò–Ø WORLD COOKIES**
```typescript
// ‚úÖ –ü–†–Ø–ú–ê–Ø –ü–†–û–í–ï–†–ö–ê COOKIES
const cookies = await page.context().cookies()
const worldCookie = cookies.find(c => c.name === 'world_id' && c.value === 'EXPECTED_WORLD')
expect(worldCookie).toBeTruthy()

// ‚ùå –ò–ó–ë–ï–ì–ê–¢–¨ - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ö–µ–ª–ø–µ—Ä—ã –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
```

#### 3. **–û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–ê–Ø –°–¢–†–£–ö–¢–£–†–ê –¢–ï–°–¢–ê**
```typescript
test.describe('BUG-XXX: Description', () => {
  let testUser: { email: string; testId: string }
  let testData: { /* world data */ }

  test.beforeAll(async () => {
    // –ó–∞–≥—Ä—É–∑–∫–∞ world –¥–∞–Ω–Ω—ã—Ö –û–î–ò–ù —Ä–∞–∑
    const worldData = getWorldData('WORLD_NAME')
    testUser = worldData.getUser('user-id')!
    testData = worldData.getData()
  })

  test.beforeEach(async ({ page }) => {
    // –ë–´–°–¢–†–ê–Ø —É—Å—Ç–∞–Ω–æ–≤–∫–∞ cookies –±–µ–∑ —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏
  })

  test('main regression test', async ({ page }) => {
    // POM usage + fail-fast –ª–æ–∫–∞—Ç–æ—Ä—ã + —á–µ—Ç–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
  })
})
```

#### 4. **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´**
- **–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è:** `.memory-bank/specs/regression/XXX-bug-name.md`
- **POM –∫–ª–∞—Å—Å—ã:** –ò—Å–ø–æ–ª—å–∑—É–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–ª–∏ —Å–æ–∑–¥–∞–π –Ω–æ–≤—ã–µ –≤ `tests/pages/`
- **World –¥–∞–Ω–Ω—ã–µ:** –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –∏–∑–æ–ª—è—Ü–∏—è, –∏—Å–ø–æ–ª—å–∑—É–π worlds
- **Fail-fast –ª–æ–∫–∞—Ç–æ—Ä—ã:** –í—Å–µ–≥–¥–∞ timeout 2s –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:

### 1. ‚úÖ –°–æ–∑–¥–∞—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ POM –∫–ª–∞—Å—Å—ã –∏ —Ö–µ–ª–ø–µ—Ä—ã (–ó–ê–í–ï–†–®–ï–ù–û)

### 2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å testid –≤ –∫–æ–¥–µ (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û):
```diff
- <textarea data-testid="chat-input" />
+ <textarea data-testid="chat-input-textarea" />

- <button data-testid="send-button" />  
+ <button data-testid="chat-input-send-button" />
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∑–æ–Ω—ã UI:
- header-* —ç–ª–µ–º–µ–Ω—Ç—ã
- sidebar-* —ç–ª–µ–º–µ–Ω—Ç—ã  
- –†–µ–∞–ª—å–Ω—ã–µ artifact-* —ç–ª–µ–º–µ–Ω—Ç—ã

### 4. ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—é –Ω–∞ –¥—Ä—É–≥–∏–µ —Ç–µ—Å—Ç—ã (–ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ)

**–†–ï–ó–£–õ–¨–¢–ê–¢:** –°–∏—Å—Ç–µ–º–∞ –ñ–µ–ª–µ–∑–æ–±–µ—Ç–æ–Ω–Ω—ã—Ö –¢–µ—Å—Ç–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –¥—Ä—É–≥–∏–µ E2E —Ç–µ—Å—Ç—ã. –≠—Ç–∞–ª–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç BUG-005 —Å–ª—É–∂–∏—Ç –æ–±—Ä–∞–∑—Ü–æ–º –¥–ª—è –±—É–¥—É—â–∏—Ö —Ç–µ—Å—Ç–æ–≤.

---

> **–§–ò–õ–û–°–û–§–ò–Ø –ñ–ï–õ–ï–ó–û–ë–ï–¢–û–ù–ù–´–• –¢–ï–°–¢–û–í:** –ë—ã—Å—Ç—Ä–æ –ª–æ–º–∞—Ç—å—Å—è, —á–µ—Ç–∫–æ —Å–æ–æ–±—â–∞—Ç—å, –ª–µ–≥–∫–æ —á–∏–Ω–∏—Ç—å. –ö–∞–∂–¥—ã–π fail-fast timeout ‚Äî —ç—Ç–æ —Ü–µ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ UI.