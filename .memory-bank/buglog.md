# üêû WelcomeCraft Bug Log

**AURA: AI-Unified Recall Architecture** ‚Äî Kanban –¥–æ—Å–∫–∞ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫.

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-06-18 (–í–°–ï –ê–ö–¢–ò–í–ù–´–ï –ë–ê–ì–ò –ò–°–ü–†–ê–í–õ–ï–ù–´ üéâ)

---

## üßä Backlog (–ù–æ–≤—ã–µ –±–∞–≥–∏)

*(–í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –±–∞–≥–æ–≤)*

---

## üìù To Do (–ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ)

*(–í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á)*

## üöÄ In Progress (–í —Ä–∞–±–æ—Ç–µ)

*(–í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á)*

---

## ‚úÖ Done (–ê—Ä—Ö–∏–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á)

-   [x] **#BUG-008: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –≤ –æ–±—ã—á–Ω–æ–º –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º–µ –±–µ–∑ –≤—ã–±–æ—Ä–∞ –º–∏—Ä–∞**
    -   **Priority:** High
    -   **Type:** Bug (UI/UX)
    -   **Status:** Done
    -   **Completed:** 2025-06-18
    -   **Description:** –í login —Ñ–æ—Ä–º–µ –Ω–µ—Ç –æ–ø—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ –æ–±—ã—á–Ω–æ–º —Ä–µ–∂–∏–º–µ –±–µ–∑ —Ç–µ—Å—Ç–æ–≤—ã—Ö –º–∏—Ä–æ–≤. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–±—è–∑–∞–Ω –≤—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω –∏–∑ —Ç–µ—Å—Ç–æ–≤—ã—Ö –º–∏—Ä–æ–≤, —á—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ–±—ã—á–Ω—É—é —Ä–∞–±–æ—Ç—É –≤ –ø—Ä–æ–¥–∞–∫—à–Ω.
    -   **User Report:** "–≤–∏–∂—É –≤ –ª–æ–≥–∏–Ω–µ –Ω–µ–ª—å–∑—è –ø–æ–ø–∞—Å—Ç—å –≤ –æ–±—ã—á–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ, –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–∏—Ä–∞! —Ç–∏–ø–∞ –≤–∞—Ä–∏–∞–Ω—Ç –º–∏—Ä–∞ (–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π)"
    -   **‚úÖ Technical Solution:**
        -   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–ø—Ü–∏—è "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π (–ü—Ä–æ–¥–∞–∫—à–Ω)" –≤ world selector login —Ñ–æ—Ä–º—ã
        -   ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ handleSubmit - –¥–ª—è PRODUCTION —Ä–µ–∂–∏–º–∞ world_id –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è (–æ—Å—Ç–∞–µ—Ç—Å—è null)
        -   ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω PRODUCTION –∫–∞–∫ default –≤—ã–±–æ—Ä –≤ login —Ñ–æ—Ä–º–µ
        -   ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω WorldIndicator –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ PRODUCTION —Ä–µ–∂–∏–º–∞ (–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è)
        -   ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –æ–ø–∏—Å–∞–Ω–∏—è –∏ –ª–µ–π–±–ª—ã –¥–ª—è —è—Å–Ω–æ—Å—Ç–∏ –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞
    -   **Files Updated:**
        -   `app/app/(auth)/login/page.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ–ø—Ü–∏—è PRODUCTION, –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞
        -   `components/world-indicator.tsx` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ PRODUCTION —Ä–µ–∂–∏–º–∞, —Å–∫—Ä—ã—Ç–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
    -   **‚úÖ Result:** –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ, –∂–¥–µ–º –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    -   **Acceptance Criteria:**
        -   ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏—é "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π" –∏–ª–∏ "Production" –≤ world selector
        -   ‚úÖ –ü—Ä–∏ –≤—ã–±–æ—Ä–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ world_id –æ—Å—Ç–∞–µ—Ç—Å—è null
        -   ‚úÖ –û–±—ã—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–µ—Å—Ç–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –º–∏—Ä–æ–≤
        -   ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –∏ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ —Ä–µ–∂–∏–º–∞–º–∏

---

## ‚úÖ Done (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)

-   [x] **#BUG-001: –ö–Ω–æ–ø–∫–∞ "–ù–æ–≤—ã–π —á–∞—Ç" –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–æ–π –ø–∞–Ω–µ–ª–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞**
    -   **Priority:** High
    -   **Type:** Bug (UI/UX)
    -   **Status:** Done
    -   **Completed:** 2025-06-18
    -   **Description:** –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–æ–π –ø–∞–Ω–µ–ª–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ –∫–Ω–æ–ø–∫–∞ "–ù–æ–≤—ã–π —á–∞—Ç" –≤ —à–∞–ø–∫–µ —Ç–æ–ª—å–∫–æ —Å–∫—Ä—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –≤ —Å–∞–π–¥–±–∞—Ä–µ, –Ω–æ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–π —á–∞—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–±–æ—á–µ–π –æ–±–ª–∞—Å—Ç–∏.
    -   **üîó Specification:** `.memory-bank/specs/regression/001-new-chat-button.md`
    -   **‚úÖ Result:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ —Ö–æ–¥–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π - –∫–Ω–æ–ø–∫–∞ "–ù–æ–≤—ã–π —á–∞—Ç" —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
    -   **User Verification:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª: "–≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"
    -   **Acceptance Criteria:**
        -   ‚úÖ –ö–ª–∏–∫ –ø–æ "New Chat" –≤—Å–µ–≥–¥–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–π —á–∞—Ç
        -   ‚úÖ –û—Ç–∫—Ä—ã—Ç–∞—è –ø–∞–Ω–µ–ª—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ –Ω–µ –º–µ—à–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—é –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞

-   [x] **#BUG-010: World cookies –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ PRODUCTION —Ä–µ–∂–∏–º –∏ –ø—Ä–∏ –ª–æ–≥–∞—É—Ç–µ**
    -   **Priority:** High
    -   **Type:** Bug (Authentication/World System)
    -   **Status:** Done
    -   **Completed:** 2025-06-18
    -   **Description:** –ü—Ä–∏ –≤—Ö–æ–¥–µ –≤ "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π (–ü—Ä–æ–¥–∞–∫—à–Ω)" —Ä–µ–∂–∏–º —Å—Ç–∞—Ä—ã–µ world_id cookies –æ—Å—Ç–∞—é—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º–∏, –∏–∑-–∑–∞ —á–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Ç–µ—Å—Ç–æ–≤–æ–º –º–∏—Ä–µ –≤–º–µ—Å—Ç–æ –ø—Ä–æ–¥–∞–∫—à–Ω. –¢–∞–∫–∂–µ –ø—Ä–∏ –ª–æ–≥–∞—É—Ç–µ world cookies –Ω–µ –æ—á–∏—â–∞—é—Ç—Å—è.
    -   **User Report:** "–∫–æ–≥–¥–∞ —è –≤—Ö–æ–∂—É –≤ –ø—Ä–æ–¥–∞–∫—à–Ω, –º–µ–Ω—è –ª–æ–≥–∏–Ω–∏—Ç –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–∏—Ä, –≤ –∫–æ—Ç–æ—Ä—ã–π —è –≤—Ö–æ–¥–∏–ª. –≤–∏–¥–∏–º–æ, –∫—É–∫–∞ –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è! –Ω–∞–¥–æ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –µ–µ, –≤–∏–¥–∏–º–æ, –ø–æ–ª–Ω–æ—Å—Ç—å—é. –ò —É–±–∏–≤–∞—Ç—å –∫–æ–≥–¥–∞ –¥–µ–ª–∞–µ–º –ª–æ–≥–∞—É—Ç"
    -   **Root Cause Analysis:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—á–∏—Å—Ç–∫–∏ world_id cookies –ø—Ä–∏ —Å–º–µ–Ω–µ —Ä–µ–∂–∏–º–æ–≤
        -   –ü—Ä–∏ –≤—Ö–æ–¥–µ –≤ PRODUCTION —Ä–µ–∂–∏–º world_id cookies –Ω–µ –æ—á–∏—â–∞–ª–∏—Å—å
        -   –ü—Ä–∏ logout world_id cookies –æ—Å—Ç–∞–≤–∞–ª–∏—Å—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ  
        -   Middleware –ø—Ä–æ–¥–æ–ª–∂–∞–ª —á–∏—Ç–∞—Ç—å —Å—Ç–∞—Ä—ã–µ cookies –∏ –ø—Ä–∏–º–µ–Ω—è—Ç—å –∏–∑–æ–ª—è—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö
        -   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø–∞–¥–∞–ª –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –º–∏—Ä –≤–º–µ—Å—Ç–æ –ø—Ä–æ–¥–∞–∫—à–Ω
    -   **‚úÖ Result:** –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ world cookies –ø—Ä–∏ PRODUCTION login –∏ logout
    -   **Technical Solution:**
        -   ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω login action - –æ—á–∏—Å—Ç–∫–∞ world cookies –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ PRODUCTION —Ä–µ–∂–∏–º
        -   ‚úÖ –°–æ–∑–¥–∞–Ω logout action —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–æ–π world cookies
        -   ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω SignOutForm –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ logout action
        -   ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ multiple domain configurations –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏
        -   ‚úÖ –°–æ–∑–¥–∞–Ω E2E —Ç–µ—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
        -   ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º: "–≤—Ö–æ–¥ –∏ –≤—ã—Ö–æ–¥ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ - –ø–æ–ø–∞–¥–∞–µ—à—å –≤ —Ç–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, –∫–∞–∫ –Ω–∞–¥–æ!"
    -   **Files Updated:**
        -   `app/app/(auth)/actions.ts` - –¥–æ–±–∞–≤–ª–µ–Ω logout action + –ª–æ–≥–∏–∫–∞ –æ—á–∏—Å—Ç–∫–∏ cookies –≤ login
        -   `components/sign-out-form.tsx` - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ logout action  
        -   `tests/e2e/regression/010-world-cookies-cleanup.test.ts` - E2E —Ç–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—á–∏—Å—Ç–∫–∏ cookies
    -   **Acceptance Criteria:**
        -   ‚úÖ –ü—Ä–∏ –≤—Ö–æ–¥–µ –≤ PRODUCTION —Ä–µ–∂–∏–º world_id cookies –æ—á–∏—â–∞—é—Ç—Å—è
        -   ‚úÖ –ü—Ä–∏ logout –≤—Å–µ world-related cookies –æ—á–∏—â–∞—é—Ç—Å—è
        -   ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –Ω–∞—Å—Ç–æ—è—â–∏–π –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º –±–µ–∑ –∏–∑–æ–ª—è—Ü–∏–∏
        -   ‚úÖ –ü–æ—Å–ª–µ logout –Ω–æ–≤—ã–π –≤—Ö–æ–¥ –Ω–µ –Ω–∞—Å–ª–µ–¥—É–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ world settings

-   [x] **#BUG-009: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –±–∞–≥ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ - –ø–∞—Ä–æ–ª—å —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ, –≤—Ö–æ–¥ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç**
    -   **Priority:** High
    -   **Type:** Bug (Critical - Auth)
    -   **Status:** Done
    -   **Completed:** 2025-06-18
    -   **Description:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É - –ø–æ—Å–ª–µ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è –∏ –Ω–∞–∂–∞—Ç–∏—è –ª–æ–≥–∏–Ω–∞ –ø–∞—Ä–æ–ª—å –º–æ–ª—á–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.
    -   **User Report:** "—è –Ω–µ –º–æ–≥—É –≤–æ–π—Ç–∏! –≤–≤–æ–∂—É –ø–∞—Ä–æ–ª—å, –Ω–∞–∂–∏–º–∞—é –ª–æ–≥–∏–Ω - –∏ –ø–∞—Ä–æ–ª—å –ø—Ä–æ—Å—Ç–æ –º–æ–ª—á–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è, –ª–æ–≥–∏–Ω –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç"
    -   **Root Cause Analysis:** –ü—Ä–æ–±–ª–µ–º–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π Zod —Å—Ö–µ–º—ã loginFormSchema
        -   PRODUCTION —Ä–µ–∂–∏–º –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç world_id –≤ form data
        -   `formData.get('world_id')` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null` –¥–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª–µ–π
        -   Zod `z.string().optional()` –æ–∂–∏–¥–∞–µ—Ç `undefined`, –∞ –Ω–µ `null`
        -   –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞–¥–∞–ª–∞ —Å silent failure, –±–ª–æ–∫–∏—Ä—É—è signIn –≤—ã–∑–æ–≤
    -   **‚úÖ Result:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ null ‚Üí undefined –¥–ª—è world_id
    -   **Technical Solution:**
        -   ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–æ `world_id: formData.get('world_id')` –Ω–∞ `world_id: formData.get('world_id') || undefined`
        -   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ login action –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
        -   ‚úÖ –°–æ–∑–¥–∞–Ω debugging E2E —Ç–µ—Å—Ç –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã
        -   ‚úÖ –¢–µ—Å—Ç –ø–æ–∫–∞–∑–∞–ª —á—Ç–æ authorize function —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
        -   ‚úÖ Login process —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è test credentials –∏ PRODUCTION —Ä–µ–∂–∏–º–∞
    -   **Files Updated:**
        -   `app/app/(auth)/actions.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ world_id + –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
        -   `tests/e2e/regression/009-auth-failure-debug.test.ts` - —Å–æ–∑–¥–∞–Ω debug —Ç–µ—Å—Ç
    -   **Acceptance Criteria:**
        -   ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É—Å–ø–µ—à–Ω–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
        -   ‚úÖ Auth process –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (world_id=null)
        -   ‚úÖ Auth process –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (world_id —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
        -   ‚úÖ –ù–µ—Ç silent failures –≤ auth –ø—Ä–æ—Ü–µ—Å—Å–µ

-   [x] **#BUG-007: –¢—Ä–µ—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ World UI –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è**
    -   **Priority:** High
    -   **Type:** Bug (System Critical)
    -   **Status:** Done
    -   **Completed:** 2025-06-18
    -   **Description:** –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º –º–∏—Ä–æ–º "CLEAN_USER_WORKSPACE", –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å–≤–æ–∏ —Å—Ç–∞—Ä—ã–µ —á–∞—Ç—ã –≤–º–µ—Å—Ç–æ —á–∏—Å—Ç–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞. WorldIndicator –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `isEnabled=false`, middleware –Ω–µ –ª–æ–≥–∏—Ä—É–µ—Ç world context.
    -   **User Report:** "–≤—ã–±–∏—Ä–∞—é –ø—É—Å—Ç–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, –Ω–æ –æ–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –º–æ–∏–º–∏ —á–∞—Ç–∞–º–∏"
    -   **Root Cause Analysis:**
        -   –ü—Ä–æ–±–ª–µ–º–∞ —Å domain cookies - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ app.localhost:3000, –Ω–æ cookie –º–æ–∂–µ—Ç –Ω–µ –¥–æ—Å—Ç–∞–≤–ª—è—Ç—å—Å—è
        -   –°–æ–∫—Ä–∞—â–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª–∏ auth process
        -   –ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ fallback cookies –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
    -   **Technical Solution In Progress:**
        -   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ console.log –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ auth actions (üîê –∏ üç™ –ø—Ä–µ—Ñ–∏–∫—Å—ã)
        -   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã fallback cookies (world_id_fallback) –±–µ–∑ domain –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
        -   ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω middleware –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ fallback cookies
        -   ‚úÖ –£–ª—É—á—à–µ–Ω WorldIndicator –¥–ª—è —á—Ç–µ–Ω–∏—è fallback cookies
        -   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤ middleware (–≤—Å–µ cookies, hostname)
        -   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ server-side/client-side –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ WorldIndicator
        -   ‚úÖ WorldIndicator –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)
        -   ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∏–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö - –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ queries –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ world context
        -   ‚úÖ –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã getChatsByUserId –∏ getPagedArtifactsByUserId –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π world isolation
        -   ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã API endpoints –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ world context –≤ queries
    -   **Files Updated:**
        -   `app/app/(auth)/actions.ts` - –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ + fallback cookies
        -   `middleware.ts` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ fallback cookies + –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ + –∏—Å–ø—Ä–∞–≤–ª–µ–Ω cookies.entries()
        -   `components/world-indicator.tsx` - fallback cookies + –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
        -   `lib/db/queries.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ worldContext –≤ getChatsByUserId –∏ getPagedArtifactsByUserId
        -   `app/api/history/route.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ worldContext –≤ getChatsByUserId
        -   `app/api/artifacts/recent/route.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ worldContext –≤ getRecentArtifactsByUserId
    -   **Final Root Cause:** 
        -   –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ–ª—è –≤ world context –ø—Ä–æ–≤–µ—Ä–∫–∞—Ö (`world_id` vs `worldId`)
        -   –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–ª—é—á cookie –≤ `getWorldContextFromRequest()` 
        -   –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ NODE_ENV —Ç–æ–ª—å–∫–æ –¥–ª—è test environment
    -   **‚úÖ Result:** –¢—Ä–µ—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç - –¥–∞–Ω–Ω—ã–µ –∏–∑–æ–ª–∏—Ä—É—é—Ç—Å—è –ø–æ –º–∏—Ä–∞–º
    -   **Acceptance Criteria:**
        -   ‚úÖ WorldIndicator –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ header –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –º–∏—Ä–∞ (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)
        -   ‚úÖ Middleware –ª–æ–≥–∏—Ä—É–µ—Ç world context –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞  
        -   ‚úÖ –î–∞–Ω–Ω—ã–µ –∏–∑–æ–ª–∏—Ä—É—é—Ç—Å—è –ø–æ –º–∏—Ä–∞–º - –≤ CLEAN_USER_WORKSPACE –ø—É—Å—Ç–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)
        -   ‚úÖ API endpoints –∏—Å–ø–æ–ª—å–∑—É—é—Ç world-aware queries —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–∑–æ–ª—è—Ü–∏–µ–π

-   [x] **#BUG-006: World –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ö–µ–¥–µ—Ä–µ + –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ world context**
    -   **Priority:** Medium
    -   **Type:** Bug (UI/UX + Logging)
    -   **Status:** Done
    -   **Completed:** 2025-06-18
    -   **Description:** –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º world, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –º–∏—Ä–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ö–µ–¥–µ—Ä–µ. –¢–∞–∫–∂–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ world context –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–æ–≤.
    -   **User Request:** –†–∞–∑–º–µ—Å—Ç–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ª–æ–≥–æ "Welcome craft", –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –º–∏—Ä–∞.
    -   **‚úÖ Result:** –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)
    -   **Technical Solution:**
        -   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ server-side –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ instrumentation.ts –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–∏—Å—Ç–µ–º—ã
        -   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ middleware –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ world context –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞  
        -   ‚úÖ –£–ª—É—á—à–µ–Ω WorldIndicator –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
        -   ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ isTestWorldsUIEnabled –≤ WorldIndicator
        -   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ auth login action –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ world cookie
        -   ‚úÖ WorldIndicator —Ä–∞–∑–º–µ—â–µ–Ω –≤ —Ö–µ–¥–µ—Ä–µ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ª–æ–≥–æ WelcomeCraft
    -   **Files Updated:**
        -   `instrumentation.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ Three-Level Testing System –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        -   `middleware.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ world context –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
        -   `components/world-indicator.tsx` - —É–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
        -   `app/app/(auth)/actions.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ world cookie
        -   `components/header.tsx` - WorldIndicator —É–∂–µ —Ä–∞–∑–º–µ—â–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ—Å–ª–µ –ª–æ–≥–æ
    -   **Acceptance Criteria:**
        -   ‚úÖ World –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ä–∞–∑–º–µ—â–µ–Ω –≤ —Ö–µ–¥–µ—Ä–µ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ª–æ–≥–æ
        -   ‚úÖ –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∫–ª—é—á–µ–Ω–Ω–æ–º world UI —Ä–µ–∂–∏–º–µ
        -   ‚úÖ –í –ª–æ–≥–∞—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º world (middleware)
        -   ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–º–µ–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —á—Ç–µ–Ω–∏—è cookie
        -   ‚úÖ Auth action –∏–º–µ–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ world cookie

---

## üöÄ In Progress (–í —Ä–∞–±–æ—Ç–µ)

*(–í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á)*

---

## ‚úÖ Done (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)

-   [x] **#BUG-005: –ö–Ω–æ–ø–∫–∞ "–ü—É–±–ª–∏–∫–∞—Ü–∏—è" –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ —Ç–∏–ø–∞ site**
    -   **Priority:** High  
    -   **Type:** Bug (UI/UX)
    -   **Status:** Done
    -   **Completed:** 2025-06-18
    -   **Description:** –í —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ —Ç–∏–ø–∞ 'site' –∫–Ω–æ–ø–∫–∞ "–ü—É–±–ª–∏–∫–∞—Ü–∏—è" –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π
    -   **Root Cause:** –î–∏–∞–ª–æ–≥ SitePublicationDialog —Ä–µ–Ω–¥–µ—Ä–∏–ª—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ fullArtifact data, –Ω–æ SWR –∑–∞–ø—Ä–æ—Å –∏–º–µ–ª refreshInterval: 0 –±–µ–∑ retry –ª–æ–≥–∏–∫–∏
    -   **‚úÖ Result:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ - —É–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ SWR –∑–∞–ø—Ä–æ—Å–∞ –∏ —É—Å–ª–æ–≤–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –¥–∏–∞–ª–æ–≥–∞
    -   **Technical Solution:**
        -   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω retry –º–µ—Ö–∞–Ω–∏–∑–º –≤ SWR –∑–∞–ø—Ä–æ—Å fullArtifact —Å refreshInterval –¥–ª—è –Ω–µ–ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        -   ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –¥–∏–∞–ª–æ–≥–∞ - —Ç–µ–ø–µ—Ä—å —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ artifactId —Å fallback –æ–±—ä–µ–∫—Ç–æ–º
        -   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ SWR –¥–ª—è —É–ª—É—á—à–µ–Ω–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
        -   ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å–∏—è —Ñ–∞–π–ª–∞ –¥–æ v2.6.0 —Å –∑–∞–ø–∏—Å—å—é –≤ HISTORY
    -   **Files Updated:**
        -   `components/artifact.tsx` - —É–ª—É—á—à–µ–Ω SWR –∑–∞–ø—Ä–æ—Å –∏ —É—Å–ª–æ–≤–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ SitePublicationDialog
        -   `tests/e2e/regression/005-publication-button-artifacts.test.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã TestUtils
    -   **Acceptance Criteria:**
        -   ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ü—É–±–ª–∏–∫–∞—Ü–∏—è" —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ site –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞—Ö
        -   ‚úÖ SitePublicationDialog –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É  
        -   ‚úÖ Custom event —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–æ–π –∏ –¥–∏–∞–ª–æ–≥–æ–º
        -   ‚úÖ –î–∏–∞–ª–æ–≥ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –¥–∞–∂–µ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ fullArtifact –¥–∞–Ω–Ω—ã—Ö (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback)
        -   ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ debug —Ç–µ—Å—Ç–æ–º: Custom event handling —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
        -   ‚úÖ –°–æ–∑–¥–∞–Ω –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–π —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç (005-publication-button-practical.test.ts)
        -   ‚úÖ –¢–µ—Å—Ç –ø–æ–∫—Ä—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é UI —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –±–µ–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ AI/–ë–î  
        -   ‚úÖ 2 passed (25.5s) - —Ç–µ—Å—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç
    -   **Quality Assurance:**
        -   ‚úÖ TypeScript compilation: `pnpm typecheck` ‚úÖ
        -   ‚úÖ ESLint validation: `pnpm lint` ‚úÖ
    -   **Technical Context:**
        -   ‚úÖ –ö–Ω–æ–ø–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –¢–û–õ–¨–ö–û –¥–ª—è site –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ (–ø–æ –¥–∏–∑–∞–π–Ω—É —Å–∏—Å—Ç–µ–º—ã)
        -   ‚úÖ –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ (text, code, sheet, image) –Ω–µ –∏–º–µ—é—Ç –∫–Ω–æ–ø–∫–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

-   [x] **#BUG-004: Runtime error - Cannot read properties of undefined (reading 'content')**
    -   **Priority:** High  
    -   **Type:** Bug (Runtime)
    -   **Status:** Done
    -   **Completed:** 2025-06-18
    -   **Description:** Runtime –æ—à–∏–±–∫–∞ "Cannot read properties of undefined (reading 'content')" –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ artifact.tsx
    -   **Error Location:** `components/artifact.tsx:124:38` –≤ useSWR callback
    -   **Call Stack:** PureArtifact.useSWR ‚Üí MainLayoutContent ‚Üí MainLayoutClient ‚Üí Layout
    -   **Root Cause:** –ü–æ–ø—ã—Ç–∫–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ —Å–≤–æ–π—Å—Ç–≤—É 'content' —É undefined –æ–±—ä–µ–∫—Ç–∞
    -   **‚úÖ Result:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç undefined latest –æ–±—ä–µ–∫—Ç–∞ –≤ SWR refreshInterval
    -   **Technical Solution:**
        -   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `if (!latest) return 3000;` –≤ useSWR refreshInterval callback
        -   ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å–∏—è —Ñ–∞–π–ª–∞ –¥–æ v2.5.0 —Å –∑–∞–ø–∏—Å—å—é –≤ HISTORY
        -   ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞–µ–≤ –∫–æ–≥–¥–∞ data.length > 0 –Ω–æ latest —ç–ª–µ–º–µ–Ω—Ç undefined
    -   **Files Updated:**
        -   `components/artifact.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç undefined latest –≤ —Å—Ç—Ä–æ–∫–µ 123
    -   **Acceptance Criteria:**
        -   ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç Artifact –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç undefined –¥–∞–Ω–Ω—ã–µ
        -   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ proper –∑–∞—â–∏—Ç–∞ –æ—Ç null/undefined
        -   ‚úÖ Runtime –æ—à–∏–±–∫–∞ –±–æ–ª—å—à–µ –Ω–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º–∏
    -   **Quality Assurance:**
        -   ‚úÖ TypeScript compilation: `pnpm typecheck` ‚úÖ
        -   ‚úÖ ESLint validation: `pnpm lint` ‚úÖ

-   [x] **#BUG-003: Next.js 15 async params error in dynamic API routes**
    -   **Priority:** High  
    -   **Type:** Bug (Technical)
    -   **Status:** Done
    -   **Completed:** 2025-06-18
    -   **Description:** –û—à–∏–±–∫–∞ "params should be awaited before using its properties" –≤ API —Ä–æ—É—Ç–µ `/api/chat/[chatId]/details`
    -   **Root Cause:** Next.js 15 —Ç—Ä–µ–±—É–µ—Ç await –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ä–æ—É—Ç–æ–≤
    -   **‚úÖ Result:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ - –¥–æ–±–∞–≤–ª–µ–Ω await –ø–µ—Ä–µ–¥ –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏–µ–π params
    -   **Technical Solution:**
        -   ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–æ `const { chatId } = params` –Ω–∞ `const { chatId } = await params`
        -   ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å–∏—è —Ñ–∞–π–ª–∞ –¥–æ v2.1.0 —Å –∑–∞–ø–∏—Å—å—é –≤ HISTORY
        -   ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ API —Ä–æ—É—Ç—ã - –≤—Å–µ —É–∂–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç Next.js 15 —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
    -   **Files Updated:**
        -   `app/api/chat/[chatId]/details/route.ts` - –¥–æ–±–∞–≤–ª–µ–Ω await –¥–ª—è params –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏–∏
    -   **Acceptance Criteria:**
        -   ‚úÖ API —Ä–æ—É—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
        -   ‚úÖ `params.chatId` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ await
        -   ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å /api/chat/[chatId]/details —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
    -   **Quality Assurance:**
        -   ‚úÖ TypeScript compilation: `pnpm typecheck` ‚úÖ
        -   ‚úÖ ESLint validation: `pnpm lint` ‚úÖ
    -   **User Verification Completed:**
        -   ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –æ—à–∏–±–∫–∞ –±–æ–ª—å—à–µ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –ª–æ–≥–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞ - –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–û
        -   ‚úÖ –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ API `/api/chat/[chatId]/details` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ - –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–û

-   [x] **#BUG-002: Server-only import causing client-side compilation error**
    -   **Priority:** High  
    -   **Type:** Bug (Technical)
    -   **Status:** Done
    -   **Completed:** 2025-06-18
    -   **Description:** –û—à–∏–±–∫–∞ "server-only cannot be imported from a Client Component" –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ dev —Å–µ—Ä–≤–µ—Ä–∞ –∏–∑-–∑–∞ –∏–º–ø–æ—Ä—Ç–∞ lib/db –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –∫–æ–¥–µ
    -   **Root Cause:** –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏ —Ç–∏–ø—ã –∏–∑ `@/lib/db/schema`, –∫–æ—Ç–æ—Ä—ã–π —Ç—Ä–∞–Ω–∑–∏—Ç–∏–≤–Ω–æ —Å–æ–¥–µ—Ä–∂–∞–ª server-only –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    -   **‚úÖ Result:** –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ - dev —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
    -   **Technical Solution:**
        -   ‚úÖ –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Ñ–∞–π–ª `lib/db/types.ts` —Å —á–∏—Å—Ç—ã–º–∏ —Ç–∏–ø–∞–º–∏ –±–µ–∑ server-only –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
        -   ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã 11 –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ —Ç–∏–ø–æ–≤ –∏–∑ –Ω–æ–≤–æ–≥–æ –º–µ—Å—Ç–∞
        -   ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –∏–º–ø–æ—Ä—Ç—ã –≤ –Ω–æ–≤–æ–º —Ñ–∞–π–ª–µ
        -   ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `server-only` –≤ `lib/publication-utils.ts`
        -   ‚úÖ –°–æ–∑–¥–∞–Ω `lib/publication-client-utils.ts` –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
        -   ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã 4 –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è client utils
    -   **Files Updated:**
        -   `lib/db/types.ts` - –Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å —Ç–∏–ø–∞–º–∏ –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
        -   `lib/publication-client-utils.ts` - –Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º–∏ —É—Ç–∏–ª–∏—Ç–∞–º–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
        -   `lib/publication-utils.ts` - –¥–æ–±–∞–≤–ª–µ–Ω server-only –∏–º–ø–æ—Ä—Ç
        -   11 –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã —Ç–∏–ø–æ–≤ Artifact, Chat, Suggestion
        -   4 –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã publication utilities
    -   **Acceptance Criteria:**
        -   ‚úÖ `pnpm dev` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
        -   ‚úÖ lib/db/index.ts –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –∫–æ–¥–µ
        -   ‚úÖ –í—Å–µ PostgreSQL –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
    -   **Quality Assurance:**
        -   ‚úÖ TypeScript compilation: `pnpm typecheck` ‚úÖ
        -   ‚úÖ ESLint validation: `pnpm lint` ‚úÖ
        -   ‚úÖ Dev server starts successfully without compilation errors
    -   **User Verification Completed:**
        -   ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å `pnpm dev` –∏ —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —Å—Ç–∞—Ä—Ç—É–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ - –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–û
        -   ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ - –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–û
        -   [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (—á–∞—Ç, –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã) —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
        -   [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
